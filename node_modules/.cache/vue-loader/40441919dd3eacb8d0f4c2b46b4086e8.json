{"remainingRequest":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\OMROM\\aiweijie\\aiweijie\\src\\Pages\\RemainTime\\RemainTime.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\OMROM\\aiweijie\\aiweijie\\src\\Pages\\RemainTime\\RemainTime.vue","mtime":1616635982883},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZyBmcm9tICIuLi8uLi9VdGlsL2dsb2JhbCI7DQppbXBvcnQgeyBzY2FsZSB9IGZyb20gIi4uLy4uL1V0aWwvdG9vbCI7DQppbXBvcnQgcmVwb3J0RGF0YSBmcm9tICIuLi8uLi9VdGlsL3JlcG9ydERhdGEiOw0KaW1wb3J0IERpYWxvZyBmcm9tICcuL1Jlc2V0RGlhbG9nLnZ1ZScNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAiUmVtYWluVGltZSIsDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGRpYWxvZ1Zpc2lhYmxlOiBmYWxzZSwNCiAgICAgICAgICAgIC8vIOWktOmDqOWPs+S+p+Wbvuaghw0KICAgICAgICAgICAgaGVhZGVyX3JpZ2h0SWNvbjogZmFsc2UsDQogICAgICAgICAgICBzZWxmQjogdHJ1ZSwNCiAgICAgICAgICAgIGJhY2tDOiB3aW5kb3cuaXNEYXJrID8gJyMwMDAnIDogJyNmZmYnLA0KICAgICAgICAgICAgLy8g5a6e6ZmF5aSp5pWwDQogICAgICAgICAgICByZWFsVmFsdWU6IDEsDQogICAgICAgICAgICAvLyDmqKHlvI/pgInmi6kNCiAgICAgICAgICAgIGJydXNoSGVhZGVyOiAiMCIsDQogICAgICAgICAgICBzaG93X3JlYWxWYWx1ZTogZmFsc2UNCiAgICAgICAgfTsNCiAgICB9LA0KDQogICAgY29tcG9uZW50czogew0KICAgICAgICBEaWFsb2cNCiAgICB9LA0KDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgYmxlQ29ubmVjdGVkKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLkJsZVN0YXR1cy5ibGVDb25uZWN0ZWQ7DQogICAgICAgIH0sDQogICAgICAgIGJpbkRhdGEoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuQmxlU3RhdHVzLmJpbkRhdGE7DQogICAgICAgIH0sDQogICAgICAgIGxvZ0RhdGEoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuQmxlU3RhdHVzLmxvZ0RhdGE7DQogICAgICAgIH0sDQogICAgfSwNCiAgICB3YXRjaDogew0KICAgICAgICBkaWFsb2dWaXNpYWJsZShuLCBvKSB7IH0sDQogICAgICAgIGJsZUNvbm5lY3RlZChuLCBvKSB7IH0sDQogICAgICAgIGJpbkRhdGEobiwgbykgew0KICAgICAgICAgICAgdGhpcy5iaW5EYXRhID0gbjsNCiAgICAgICAgICAgIHRoaXMuanVkZ2VCb290aEhlYWRlcigpDQogICAgICAgIH0sDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLmp1ZGdlQm9vdGhIZWFkZXIoKQ0KICAgICAgICB0aGlzLmdldENsb3VkRGF0YSh0aGlzLmJydXNoSGVhZGVyKQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICB9LA0KDQogICAgbWV0aG9kczogew0KICAgICAgICAvKioNCiAgICAgICAgICogQGRlc2NyaXB0aW9uOiDliJ3lp4vljJbliKTmlq3lvZPliY3liLflpLTmqKHlvI8NCiAgICAgICAgICogQHBhcmFtIHsqfQ0KICAgICAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAgICAgKi8NCiAgICAgICAganVkZ2VCb290aEhlYWRlcihoZWFkZXJNb2RlID0gbnVsbCkgew0KICAgICAgICAgICAgdGhpcy5icnVzaEhlYWRlciA9IHNjYWxlLmhleHRvQmluKHRoaXMuYmluRGF0YS5zdWJzdHIoNCwgMikpLnN1YnN0cig1LCAxKTsNCiAgICAgICAgfSwNCg0KICAgICAgICAvKioNCiAgICAgICAgICogQGRlc2NyaXB0aW9uOiDph43nva7ml7bpl7TmjInpkq4NCiAgICAgICAgICogQHBhcmFtIHt0eXBlfQ0KICAgICAgICAgKiBAcmV0dXJuIHt0eXBlfQ0KICAgICAgICAgKi8NCiAgICAgICAgcmVzZXRpbWUoKSB7DQogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2lhYmxlID0gdHJ1ZTsNCiAgICAgICAgfSwNCg0KICAgICAgICAvKioNCiAgICAgICAgICogQGRlc2NyaXB0aW9uOiDor7fmsYLkupHnq6/mlbDmja4NCiAgICAgICAgICogQHBhcmFtIHsqfQ0KICAgICAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAgICAgKi8NCiAgICAgICAgZ2V0Q2xvdWREYXRhKG1vZGUpIHsNCiAgICAgICAgICAgIGxldCByZXNDYWxsYmFjayA9IChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmNvdW50RGF5cyhyZXMsIG1vZGUpDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXBvcnREYXRhLmdldEhpc3RvcnlMb2cocmVzQ2FsbGJhY2spDQogICAgICAgIH0sDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEBkZXNjcmlwdGlvbjog6K6h566X5a+55bqU5aSp5pWwDQogICAgICAgICAqIEBwYXJhbSB7Kn0NCiAgICAgICAgICogQHJldHVybiB7Kn0NCiAgICAgICAgICovDQogICAgICAgIGNvdW50RGF5cyhhcnIsIHR5cGVIZWFkZXIgPSAnMCcpIHsNCiAgICAgICAgICAgIGxldCB0aW1lcyA9IDA7DQogICAgICAgICAgICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgICAgIGl0ZW1bMF0gPT09IHR5cGVIZWFkZXIgPyB0aW1lcysrIDogJyc7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgbGV0IHJlc3QgPSAoOTAgLSAodGltZXMgLyAyKSkgPCAwID8gMCA6ICg5MCAtICh0aW1lcyAvIDIpKTsNCiAgICAgICAgICAgIHRoaXMucmVhbFZhbHVlID0gTWF0aC5mbG9vcihyZXN0KTsNCiAgICAgICAgICAgIHRoaXMuc2hvd19yZWFsVmFsdWUgPSB0cnVlOw0KICAgICAgICB9LA0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBAZGVzY3JpcHRpb246IOW8ueeql+a0vuWPkeS6i+S7tg0KICAgICAgICAgKiBAcGFyYW0geyp9DQogICAgICAgICAqIEByZXR1cm4geyp9DQogICAgICAgICAqLw0KICAgICAgICBnZXREaWFsb2dEYXRhKHZhbCkgew0KICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYWJsZSA9IHZhbC5jb21wb25lbnRzVmlzaWFibGU7DQogICAgICAgICAgICBpZiAodmFsLnZhbHVlKSB7DQogICAgICAgICAgICAgICAgcmVwb3J0RGF0YS5yZXNpemUobmV3IERhdGUoKS5nZXRUaW1lKCkgKyAxMDAwKQ0KICAgICAgICAgICAgICAgIHRoaXMucmVhbFZhbHVlID0gOTA7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2xvdWREYXRhKHRoaXMuYnJ1c2hIZWFkZXIpDQogICAgICAgICAgICAgICAgfSwgMTAwMCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KfTsNCg=="},{"version":3,"sources":["RemainTime.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RemainTime.vue","sourceRoot":"src/Pages/RemainTime","sourcesContent":["<!--\r\n * @Description: 刷头剩余页面\r\n * @version: \r\n * @Author: HeZhen\r\n * @Date: 2020-10-23 14:40:40\r\n * @LastEditors: HeZhen\r\n * @LastEditTime: 2021-02-22 10:56:13\r\n-->\r\n<!--  -->\r\n<template>\r\n    <div class=\"remainTime flexC\">\r\n        <!-- 头部start -->\r\n        <div style=\"height:'80px'\">\r\n            <Header :isRight=\"header_rightIcon\" :selfB='selfB' :backC='backC'>\r\n                <span slot=\"headerTitle\">{{$t('RemainTime.header')}}</span>\r\n            </Header>\r\n        </div>\r\n        <!-- 头部end -->\r\n        <div class=\"main flexC\">\r\n            <!-- <div class=\"predict\">预计可使用18天</div> -->\r\n            <div v-if=\"show_realValue\" class=\"progress flexC\">\r\n                <Cprogress :realValue=\"realValue\"></Cprogress>\r\n            </div>\r\n            <div v-if=\"show_realValue\" class=\"doctorWord\">\r\n                {{$t(\"RemainTime.doctorWord\")}}\r\n            </div>\r\n            <!-- 刷头start -->\r\n            <!-- <div class=\"dialogContent_out flexR\">\r\n                <div class=\"dialogContent\">\r\n                    \r\n                    <div class=\"itemList\">\r\n                        <div class=\"toothbrushU flexContent\">\r\n                            <div class=\"toothbrushU1\"></div>\r\n                        </div>\r\n                        <div class=\"toothbrushI flexContent\">\r\n                            <div class=\"toothbrushI1\"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"itemList brushType\">\r\n                    <div class=\"flexContent toothbrushCommon\">{{$t('index.uBrush')}}</div>\r\n                    <div class=\"flexContent toothbrushCommon\">{{$t('index.miniBrush')}}</div>\r\n                </div>\r\n                    <div class=\"itemList brushType\">\r\n                        <div class=\"clickU flexContent\" v-for=\"(item,index) in modules\" :key=\"index\">\r\n                            <div class=\"rounding\">\r\n                                <Round :status=\"item.check\" @changeStatus=\"getRoundStatus(index,arguments)\"></Round>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div> -->\r\n\r\n            <!-- 刷头start -->\r\n            <div class=\"footer flexC\">\r\n                <button @click=\"resetime\" class='btn'>{{$t('RemainTime.reset')}}</button>\r\n            </div>\r\n        </div>\r\n        <Dialog :visiable=\"dialogVisiable\" @sendData='getDialogData'></Dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport g from \"../../Util/global\";\r\nimport { scale } from \"../../Util/tool\";\r\nimport reportData from \"../../Util/reportData\";\r\nimport Dialog from './ResetDialog.vue'\r\nexport default {\r\n    name: \"RemainTime\",\r\n    data() {\r\n        return {\r\n            dialogVisiable: false,\r\n            // 头部右侧图标\r\n            header_rightIcon: false,\r\n            selfB: true,\r\n            backC: window.isDark ? '#000' : '#fff',\r\n            // 实际天数\r\n            realValue: 1,\r\n            // 模式选择\r\n            brushHeader: \"0\",\r\n            show_realValue: false\r\n        };\r\n    },\r\n\r\n    components: {\r\n        Dialog\r\n    },\r\n\r\n    computed: {\r\n        bleConnected() {\r\n            return this.$store.state.BleStatus.bleConnected;\r\n        },\r\n        binData() {\r\n            return this.$store.state.BleStatus.binData;\r\n        },\r\n        logData() {\r\n            return this.$store.state.BleStatus.logData;\r\n        },\r\n    },\r\n    watch: {\r\n        dialogVisiable(n, o) { },\r\n        bleConnected(n, o) { },\r\n        binData(n, o) {\r\n            this.binData = n;\r\n            this.judgeBoothHeader()\r\n        },\r\n    },\r\n    created() {\r\n        this.judgeBoothHeader()\r\n        this.getCloudData(this.brushHeader)\r\n    },\r\n    mounted() {\r\n    },\r\n\r\n    methods: {\r\n        /**\r\n         * @description: 初始化判断当前刷头模式\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        judgeBoothHeader(headerMode = null) {\r\n            this.brushHeader = scale.hextoBin(this.binData.substr(4, 2)).substr(5, 1);\r\n        },\r\n\r\n        /**\r\n         * @description: 重置时间按钮\r\n         * @param {type}\r\n         * @return {type}\r\n         */\r\n        resetime() {\r\n            this.dialogVisiable = true;\r\n        },\r\n\r\n        /**\r\n         * @description: 请求云端数据\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        getCloudData(mode) {\r\n            let resCallback = (res) => {\r\n                this.countDays(res, mode)\r\n            }\r\n            reportData.getHistoryLog(resCallback)\r\n        },\r\n\r\n        /**\r\n         * @description: 计算对应天数\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        countDays(arr, typeHeader = '0') {\r\n            let times = 0;\r\n            arr.forEach((item) => {\r\n                item[0] === typeHeader ? times++ : '';\r\n            })\r\n            let rest = (90 - (times / 2)) < 0 ? 0 : (90 - (times / 2));\r\n            this.realValue = Math.floor(rest);\r\n            this.show_realValue = true;\r\n        },\r\n\r\n        /**\r\n         * @description: 弹窗派发事件\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        getDialogData(val) {\r\n            this.dialogVisiable = val.componentsVisiable;\r\n            if (val.value) {\r\n                reportData.resize(new Date().getTime() + 1000)\r\n                this.realValue = 90;\r\n                setTimeout(() => {\r\n                    this.getCloudData(this.brushHeader)\r\n                }, 1000);\r\n            }\r\n        }\r\n    },\r\n};\r\n</script>\r\n\r\n\r\n\r\n<style lang='less' scoped>\r\n.remainTime {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    background-color: #fff;\r\n    position: relative;\r\n    .main {\r\n        width: 100%;\r\n        background-color: #fff;\r\n        flex: 1;\r\n        .progress {\r\n            margin: 24px 0 0 0;\r\n            width: 100%;\r\n            height: 240px;\r\n            //height: 194px;\r\n            //border: 1px solid red;\r\n            box-sizing: border-box;\r\n        }\r\n        .doctorWord {\r\n            // border: 1px solid red;\r\n            width: 100%;\r\n            text-align: center;\r\n            font-size: 14px;\r\n            color: rgba(0, 0, 0, 0.9);\r\n            margin-top: 32px;\r\n        }\r\n        .footer {\r\n            width: 100%;\r\n            text-align: center;\r\n            background-color: #fff;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            position: absolute;\r\n            bottom: 24px;\r\n            .btn {\r\n                height: 36px;\r\n                width: 50%;\r\n                text-align: center;\r\n                border-radius: 18px;\r\n                border: 0;\r\n                background-color: rgba(0, 0, 0, 0.05);\r\n                outline: none;\r\n                font-size: 16px;\r\n                color: #007dff;\r\n            }\r\n        }\r\n    }\r\n}\r\nbutton :focus {\r\n    outline: 0;\r\n}\r\n.flexR {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.flexC {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n.flexContent {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.theme-dark {\r\n    .remainTime {\r\n        background-color: #000;\r\n        .main {\r\n            background-color: #000;\r\n            .progress {\r\n                //height: 220px;\r\n            }\r\n            .doctorWord {\r\n                color: rgba(255, 255, 255, 0.86);\r\n            }\r\n            .footer {\r\n                background-color: #000;\r\n                .btn {\r\n                    background-color: rgba(255, 255, 255, 0.1);\r\n                    color: #3f97e9;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>"]}]}