{"remainingRequest":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\OMROM\\aiweijie\\aiweijie\\src\\Pages\\Log\\Log.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\OMROM\\aiweijie\\aiweijie\\src\\Pages\\Log\\Log.vue","mtime":1616635982883},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZyBmcm9tICIuLi8uLi9VdGlsL2dsb2JhbCI7DQppbXBvcnQgeyBzY2FsZSwgYnJ1c2hpbmdIaXN0b3J5IH0gZnJvbSAiLi4vLi4vVXRpbC90b29sIjsNCmltcG9ydCByZXBvcnREYXRhIGZyb20gIi4uLy4uL1V0aWwvcmVwb3J0RGF0YSI7DQppbXBvcnQgQlNjcm9sbCBmcm9tICdiZXR0ZXItc2Nyb2xsJzsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAiTG9nIiwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgaXNSaWdodDogZmFsc2UsDQogICAgICAgICAgICBiYWNrQzogd2luZG93LmlzRGFyayA/ICcjMDAwJyA6ICcjZmZmJywNCiAgICAgICAgICAgIHNlbGZCOiB0cnVlLA0KICAgICAgICAgICAgc2Nyb2xsOiBudWxsLA0KICAgICAgICAgICAgbG9nQXJyOiBbXSwNCiAgICAgICAgICAgIGNvbmVudEhlaWdodDogJycsDQogICAgICAgICAgICB3YXBwZXJIZWlnaHQ6ICcnLA0KICAgICAgICB9Ow0KICAgIH0sDQoNCiAgICBjb21wb25lbnRzOiB7fSwNCg0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIGJsZUNvbm5lY3RlZCgpIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5CbGVTdGF0dXMuYmxlQ29ubmVjdGVkOw0KICAgICAgICB9LA0KICAgICAgICBiaW5EYXRhKCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLkJsZVN0YXR1cy5iaW5EYXRhOw0KICAgICAgICB9LA0KICAgICAgICBjbG91ZEhpc3RvcnkoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuQmxlU3RhdHVzLmNsb3VkSGlzdG9yeTsNCiAgICAgICAgfSwNCiAgICAgICAgY29sb3JzKCkgew0KICAgICAgICAgICAgbGV0IGNvbG9ycyA9IHdpbmRvdy5pc0RhcmsNCiAgICAgICAgICAgICAgICA/IFsiI2JhNTUwMCIsICIjMDA3YWFjIiwgIiM0ZTc3MDAiXSA6IFsiI2ZmNzYwMCIsICIjMDA3ZGZmIiwgIiM4Y2Q2MDAiXTsNCiAgICAgICAgICAgIHJldHVybiBjb2xvcnM7DQogICAgICAgIH0sDQogICAgfSwNCiAgICB3YXRjaDogew0KICAgICAgICBibGVDb25uZWN0ZWQobiwgbykgew0KICAgICAgICB9LA0KICAgICAgICBiaW5EYXRhKG4sIG8pIHsNCiAgICAgICAgICAgIHRoaXMuYmluRGF0YSA9IG47DQogICAgICAgIH0sDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KDQoNCiAgICB9LA0KDQogICAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5jb25lbnRIZWlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9nSXRlbScpLmNsaWVudEhlaWdodCArICdweCc7DQogICAgICAgICAgICB0aGlzLndhcHBlckhlaWdodCA9IHRoaXMuY2xvdWRIaXN0b3J5Lmxlbmd0aCAqIDYyICsgJ3B4JzsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuX2luaXRTY3JvbGwoKQ0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0RGF0YSh0aGlzLmNsb3VkSGlzdG9yeSkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KQ0KDQogICAgfSwNCg0KICAgIG1ldGhvZHM6IHsNCg0KICAgICAgICAvKioNCiAgICAgICAgICogQGRlc2NyaXB0aW9uOiAg5aSE55CG5Y6G5Y+y5pWw5o2u77yM6L2s5o2i5oiQ5a+56LGhDQogICAgICAgICAqIEBwYXJhbSB7Kn0gZGF0YQ0KICAgICAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAgICAgKi8NCiAgICAgICAgZm9ybWF0RGF0YShkYXRhKSB7DQogICAgICAgICAgICBsZXQgaSA9IGRhdGEubGVuZ3RoOw0KICAgICAgICAgICAgZGF0YS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIGxldCBicnVzaGluZ1RpbWUgPSBwYXJzZUludChpdGVtLnN1YnN0cigxKSwgMik7DQogICAgICAgICAgICAgICAgbGV0IGhlYWRlclR5cGUgPSBpdGVtWzBdID09PSAnMCcgPyAiVSIgOiAiSSI7DQogICAgICAgICAgICAgICAgLy8g5Yi354mZ5b6X5YiGDQogICAgICAgICAgICAgICAgbGV0IGdyYWRlID0gYnJ1c2hpbmdIaXN0b3J5LmdldFRvdGFsKGJydXNoaW5nVGltZSwgaGVhZGVyVHlwZSk7DQogICAgICAgICAgICAgICAgLy8g5Yi354mZ5pe26ZW/IDHliIYyMOenkg0KICAgICAgICAgICAgICAgIGxldCBmb3JtYXRMZW4gPSBicnVzaGluZ0hpc3RvcnkuZm9ybWF0VGltZShicnVzaGluZ1RpbWUsIHRoaXMpOw0KICAgICAgICAgICAgICAgIC8vIOW+l+WIhuminOiJsg0KICAgICAgICAgICAgICAgIGxldCBjb2xvciA9IGJydXNoaW5nSGlzdG9yeS5nZXRDb2xvcihncmFkZSk7DQogICAgICAgICAgICAgICAgLy8g5Yi354mZ6aG65bqPIOesrCBuIOasoQ0KICAgICAgICAgICAgICAgIGxldCByYW5raW5nID0gYCR7dGhpcy4kdCgiaW5kZXguTG9nLnRoZSIpfSAke2kgLSBpbmRleH0gJHt0aGlzLiR0KCJpbmRleC5Mb2cudGltZXMiKX1gOw0KICAgICAgICAgICAgICAgIC8vIOWIt+eJmeWOn+Wni+aVsOaNrg0KICAgICAgICAgICAgICAgIGxldCBiaW4gPSBpdGVtOw0KICAgICAgICAgICAgICAgIHRoaXMubG9nQXJyLnB1c2goew0KICAgICAgICAgICAgICAgICAgICBncmFkZSwNCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0TGVuLA0KICAgICAgICAgICAgICAgICAgICBjb2xvciwNCiAgICAgICAgICAgICAgICAgICAgcmFua2luZywNCiAgICAgICAgICAgICAgICAgICAgYmluDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhpcy5zY3JvbGwucmVmcmVzaCgpDQogICAgICAgIH0sDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEBkZXNjcmlwdGlvbjogIOWIt+eJmeiusOW9leeCueWHu+S6i+S7tg0KICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZWxlIOWIt+eJmeiusOW9leaVsOaNrg0KICAgICAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAgICAgKi8NCiAgICAgICAgYnJ1c2hEZXRhaWwoYmluKSB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvbG9nRGV0YWlsIiwgcXVlcnk6IHsgYmluIH0gfSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEBkZXNjcmlwdGlvbjog6K+35rGC5LqR56uv5pWw5o2uDQogICAgICAgICAqIEBwYXJhbSB7Kn0NCiAgICAgICAgICogQHJldHVybiB7Kn0NCiAgICAgICAgICovDQogICAgICAgIGdldENsb3VkRGF0YShtb2RlKSB7DQogICAgICAgICAgICBsZXQgcmVzQ2FsbGJhY2sgPSAocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy5mb3JtYXREYXRhKHJlcykNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJlcG9ydERhdGEuZ2V0SGlzdG9yeUxvZyhyZXNDYWxsYmFjaykNCiAgICAgICAgfSwNCg0KICAgICAgICBfaW5pdFNjcm9sbCgpIHsNCiAgICAgICAgICAgIHRoaXMuc2Nyb2xsID0gbmV3IEJTY3JvbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbmVudCcpLCB7DQogICAgICAgICAgICAgICAgcHJvYmVUeXBlOiAzLA0KICAgICAgICAgICAgICAgIGNsaWNrOiB0cnVlLA0KICAgICAgICAgICAgICAgIHNjcm9sbFk6IHRydWUsDQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgIH0sDQp9Ow0K"},{"version":3,"sources":["Log.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Log.vue","sourceRoot":"src/Pages/Log","sourcesContent":["<!--\r\n * @Description: \r\n * @version: \r\n * @Author: HeZhen\r\n * @Date: 2020-11-09 18:57:10\r\n * @LastEditors: HeZhen\r\n * @LastEditTime: 2021-03-11 10:19:18\r\n -->\r\n<template>\r\n    <div class=\"logDiv\">\r\n        <!-- 头部start -->\r\n        <div class=\"logDiv_header\">\r\n            <Header :isRight='isRight' :selfB='selfB' :backC='backC'>\r\n                <template slot=\"headerTitle\">{{$t('Log.header')}}</template>\r\n            </Header>\r\n        </div>\r\n        <!-- 头部end -->\r\n        <div class=\"logItem\">\r\n            <div class=\"conent\" :style=\"{height:conentHeight}\">\r\n                <div class=\"wapper\" :style=\"{height:wapperHeight}\">\r\n                    <div v-for=\"(item,index) in logArr\" :key=\"index\" class=\"log_item flex\" @click=\"brushDetail(item.bin)\">\r\n                        <span class=\"grade\" :style=\"{'backgroundColor':item.color}\">{{item.grade}}</span>\r\n                        <div :class=\" index < logArr.length-1 ? 'detail detail_bor flex' : 'detail flex' \">\r\n                            <div class=\"detail_left flexC\">\r\n                                <div class=\"left_top flex\">\r\n                                    <span>{{$t('Log.brushLen')}}</span>\r\n                                </div>\r\n                                <span class=\"left_bottom\">{{item.ranking}}</span>\r\n                            </div>\r\n                            <span class=\"len\">{{item.formatLen}}</span>\r\n                            <div class=\"detail_right\"></div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- <div class=\"Logtip\">{{$t('Log.tip')}}</div> -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer\">\r\n            <div class=\"Logtip\">{{$t('Log.tip')}}</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport g from \"../../Util/global\";\r\nimport { scale, brushingHistory } from \"../../Util/tool\";\r\nimport reportData from \"../../Util/reportData\";\r\nimport BScroll from 'better-scroll';\r\nexport default {\r\n    name: \"Log\",\r\n    data() {\r\n        return {\r\n            isRight: false,\r\n            backC: window.isDark ? '#000' : '#fff',\r\n            selfB: true,\r\n            scroll: null,\r\n            logArr: [],\r\n            conentHeight: '',\r\n            wapperHeight: '',\r\n        };\r\n    },\r\n\r\n    components: {},\r\n\r\n    computed: {\r\n        bleConnected() {\r\n            return this.$store.state.BleStatus.bleConnected;\r\n        },\r\n        binData() {\r\n            return this.$store.state.BleStatus.binData;\r\n        },\r\n        cloudHistory() {\r\n            return this.$store.state.BleStatus.cloudHistory;\r\n        },\r\n        colors() {\r\n            let colors = window.isDark\r\n                ? [\"#ba5500\", \"#007aac\", \"#4e7700\"] : [\"#ff7600\", \"#007dff\", \"#8cd600\"];\r\n            return colors;\r\n        },\r\n    },\r\n    watch: {\r\n        bleConnected(n, o) {\r\n        },\r\n        binData(n, o) {\r\n            this.binData = n;\r\n        },\r\n    },\r\n    created() {\r\n\r\n\r\n    },\r\n\r\n    mounted() {\r\n        this.$nextTick(() => {\r\n            this.conentHeight = document.querySelector('.logItem').clientHeight + 'px';\r\n            this.wapperHeight = this.cloudHistory.length * 62 + 'px';\r\n            setTimeout(() => {\r\n                this._initScroll()\r\n                this.formatData(this.cloudHistory)\r\n            });\r\n        })\r\n\r\n    },\r\n\r\n    methods: {\r\n\r\n        /**\r\n         * @description:  处理历史数据，转换成对象\r\n         * @param {*} data\r\n         * @return {*}\r\n         */\r\n        formatData(data) {\r\n            let i = data.length;\r\n            data.forEach((item, index) => {\r\n                let brushingTime = parseInt(item.substr(1), 2);\r\n                let headerType = item[0] === '0' ? \"U\" : \"I\";\r\n                // 刷牙得分\r\n                let grade = brushingHistory.getTotal(brushingTime, headerType);\r\n                // 刷牙时长 1分20秒\r\n                let formatLen = brushingHistory.formatTime(brushingTime, this);\r\n                // 得分颜色\r\n                let color = brushingHistory.getColor(grade);\r\n                // 刷牙顺序 第 n 次\r\n                let ranking = `${this.$t(\"index.Log.the\")} ${i - index} ${this.$t(\"index.Log.times\")}`;\r\n                // 刷牙原始数据\r\n                let bin = item;\r\n                this.logArr.push({\r\n                    grade,\r\n                    formatLen,\r\n                    color,\r\n                    ranking,\r\n                    bin\r\n                });\r\n            })\r\n            this.scroll.refresh()\r\n        },\r\n\r\n        /**\r\n         * @description:  刷牙记录点击事件\r\n         * @param {Object} ele 刷牙记录数据\r\n         * @return {*}\r\n         */\r\n        brushDetail(bin) {\r\n            this.$router.push({ path: \"/logDetail\", query: { bin } });\r\n        },\r\n\r\n        /**\r\n         * @description: 请求云端数据\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        getCloudData(mode) {\r\n            let resCallback = (res) => {\r\n                this.formatData(res)\r\n            }\r\n            reportData.getHistoryLog(resCallback)\r\n        },\r\n\r\n        _initScroll() {\r\n            this.scroll = new BScroll(document.querySelector('.conent'), {\r\n                probeType: 3,\r\n                click: true,\r\n                scrollY: true,\r\n            })\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n\r\n<style lang='less' scoped>\r\n.logDiv {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background-color: #fff;\r\n    padding-bottom: 16px;\r\n    .logDiv_header {\r\n        height: 80px;\r\n    }\r\n    .logItem {\r\n        flex: 1;\r\n        overflow: hidden;\r\n        .conent {\r\n            overflow: hidden;\r\n            padding: 0 16px;\r\n            .wapper {\r\n                padding: 0 0 48px 0;\r\n                position: relative;\r\n                .log_item {\r\n                    height: 64px;\r\n                    align-items: center;\r\n                    .grade {\r\n                        width: 40px;\r\n                        height: 40px;\r\n                        text-align: center;\r\n                        line-height: 40px;\r\n                        border-radius: 50%;\r\n                        margin-right: 19px;\r\n                        font-size: 16px;\r\n                        color: #fff;\r\n                    }\r\n                    .detail {\r\n                        position: relative;\r\n                        flex: 1;\r\n                        height: 64px;\r\n                        .detail_left {\r\n                            flex: 1;\r\n                            height: 64px;\r\n                            display: flex;\r\n                            flex-direction: column;\r\n                            justify-content: center;\r\n                            .left_top {\r\n                                font-size: 16px;\r\n                                color: rgba(0, 0, 0, 0.9);\r\n                                width: 116px;\r\n                                justify-content: space-between;\r\n                                margin: 0 0 4px 0;\r\n                            }\r\n                            .left_bottom {\r\n                                font-size: 14px;\r\n                                color: rgba(0, 0, 0, 0.6);\r\n                                margin: 4px 0 0 0;\r\n                            }\r\n                        }\r\n                        .len {\r\n                            line-height: 64px;\r\n                            font-size: 14px;\r\n                            color: rgba(0, 0, 0, 0.6);\r\n                            margin: 0 8px 0 0;\r\n                        }\r\n                        .detail_right {\r\n                            position: absolute;\r\n                            top: 50%;\r\n                            right: 0;\r\n                            margin: -2px 0 0 0;\r\n                            transform: translate(0,-50%);\r\n                            width: 6px;\r\n                            height: 10px;\r\n                            background-image: url(\"../../Images/light/log_right.png\");\r\n                            background-size: 100% 100%;\r\n                            background-repeat: no-repeat;\r\n                            opacity: 0.38;\r\n                            margin: -1px 0 0 0;\r\n                        }\r\n                    }\r\n                    .detail_bor {\r\n                        padding-bottom: 11px;\r\n                        border-bottom: 0.00694rem solid rgba(0, 0, 0, 0.2);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .footer {\r\n        .Logtip {\r\n            width: 100%;\r\n            height: 22px;\r\n            line-height: 22px;\r\n            text-align: center;\r\n            font-size: 12px;\r\n            color: rgba(0, 0, 0, 1);\r\n            opacity: 0.38;\r\n        }\r\n    }\r\n}\r\n.flex {\r\n    display: flex;\r\n    flex-direction: row;\r\n}\r\n.flexC {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.theme-dark {\r\n    .logDiv {\r\n        background-color: #000;\r\n        // .logDiv_header {\r\n        // }\r\n        .logItem {\r\n            .conent {\r\n                .wapper {\r\n                    .log_item {\r\n                        .grade {\r\n                            color: #fff;\r\n                        }\r\n                        .detail {\r\n                            .detail_left {\r\n                                .left_top {\r\n                                    color: rgba(255, 255, 255, 0.86);\r\n                                }\r\n                                .left_bottom {\r\n                                    color: rgba(255, 255, 255, 0.6);\r\n                                }\r\n                            }\r\n                            .len {\r\n                                color: rgba(255, 255, 255, 0.6);\r\n                            }\r\n                            .detail_right {\r\n                                background-image: url(\"../../Images/dark/log_right.png\");\r\n                            }\r\n                        }\r\n                        .detail_bor {\r\n                            border-bottom: 0.00694rem solid\r\n                                rgba(255, 255, 255, 0.2);\r\n                        }\r\n                    }\r\n                    // .Logtip {\r\n                    //     color: rgba(255, 255, 255, 0.66);\r\n                    // }\r\n                }\r\n            }\r\n        }\r\n        .footer {\r\n            .Logtip {\r\n                color: rgba(255, 255, 255, 0.66);\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"]}]}