{"remainingRequest":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\OMROM\\aiweijie\\aiweijie\\src\\Pages\\Brushing\\Brushing_other.vue?vue&type=style&index=0&id=01eb880c&lang=less&scoped=true&","dependencies":[{"path":"E:\\OMROM\\aiweijie\\aiweijie\\src\\Pages\\Brushing\\Brushing_other.vue","mtime":1616635982841},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouYnJ1c2hpbmdfb3RoZXIgew0KICAgIC5hYWEgew0KICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgIHRvcDogMjIwcHg7DQogICAgICAgIGxlZnQ6IDIyMHB4Ow0KICAgICAgICB6LWluZGV4OiA5OTk5OTk5OTk7DQogICAgfQ0KICAgIHdpZHRoOiAxMDAlOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTZiNmU2Ow0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAuaGVhZGVyQmFjayB7DQogICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiLi4vLi4vSW1hZ2VzL2xpZ2h0L3ZpZGVvQmFjay5wbmciKTsNCiAgICAgICAgd2lkdGg6IDI0cHg7DQogICAgICAgIGhlaWdodDogMjRweDsNCiAgICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgICBsZWZ0OiAyNHB4Ow0KICAgICAgICB6LWluZGV4OiA5OTsNCiAgICB9DQogICAgLmltZyB7DQogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgICAgICB3aWR0aDogMzhweDsNCiAgICAgICAgaGVpZ2h0OiAzOHB4Ow0KICAgICAgICBsZWZ0OiAzMDFweDsNCiAgICAgICAgdG9wOiA4MHB4Ow0KICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgIHotaW5kZXg6IDk5Ow0KICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIi4uLy4uL0ltYWdlcy9saWdodC9tdXNpY19vbi5wbmciKTsNCiAgICB9DQogICAgLmltZ19jbG9zZSB7DQogICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiLi4vLi4vSW1hZ2VzL2xpZ2h0L211c2ljX2Nsb3NlLnBuZyIpOw0KICAgIH0NCiAgICAuYmFubmVyIHsNCiAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgLnZpZGVvIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgdG9wOiAwOw0KICAgICAgICAgICAgbGVmdDogMDsNCiAgICAgICAgICAgIHJpZ2h0OiAwOw0KICAgICAgICAgICAgYm90dG9tOiAwOw0KICAgICAgICAgICAgei1pbmRleDogOTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAuZm9vdGVyIHsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGhlaWdodDogMTE1cHg7DQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogICAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC45KTsNCiAgICAgICAgLmxvd19iZXR0ZXJ5IHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIGJvdHRvbTogMzdweDsNCiAgICAgICAgICAgIGxlZnQ6IDUwJTsNCiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIDApOw0KICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICBoZWlnaHQ6IDI3cHg7DQogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7DQogICAgICAgICAgICB6LWluZGV4OiA5OTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDAgMCA0MXB4IDA7DQogICAgICAgICAgICBzcGFuIHsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIC5sb3dfYmFja0Mgew0KICAgICAgICBjb2xvcjogcmdiKDI1MSwgNDIsIDQ1LCAwLjkpOw0KICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmNGY0Ow0KICAgIH0NCn0NCi5mbGV4IHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7DQp9DQouZmxleEMgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCn0NCi5wb3NpSW1nIHsNCiAgICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJTsNCiAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0Ow0KICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KfQ0KLnBvc2l0aW9uX2NlbnRlciB7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIGxlZnQ6IDUwJTsNCiAgICB0b3A6IDUwJTsNCiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsNCn0NCi5mb250MjQgew0KICAgIGZvbnQtc2l6ZTogMjRweDsNCn0NCi5mb250MTYgew0KICAgIGZvbnQtc2l6ZTogMTZweDsNCn0NCi5mb250MTIgew0KICAgIGZvbnQtc2l6ZTogMTJweDsNCn0NCg0KLnRoZW1lLWRhcmsgew0KICAgIC5icnVzaGluZ19vdGhlciB7DQogICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM5NmI2ZTY7DQogICAgICAgIC5oZWFkZXIgew0KICAgICAgICAgICAgLmhlYWRlcl9pbm5lciB7DQogICAgICAgICAgICAgICAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC45KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAuc3ViaGVhZGVyIHsNCiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuOSk7DQogICAgICAgIH0NCiAgICAgICAgLmltZyB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDg0ODQ4Ow0KICAgICAgICB9DQogICAgICAgIC5iYW5uZXIgew0KICAgICAgICAgICAgLmNlbnRlckltZyB7DQogICAgICAgICAgICAgICAgLmNpcmNsZSB7DQogICAgICAgICAgICAgICAgICAgIC50aW1lIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLmZvb3RlciB7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwOw0KICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44Nik7DQogICAgICAgIH0NCiAgICAgICAgLmxvd19iYWNrQyB7DQogICAgICAgICAgICBjb2xvcjogI2U2NDU0ODsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMzNzIyMjI7DQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["Brushing_other.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAikBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Brushing_other.vue","sourceRoot":"src/Pages/Brushing","sourcesContent":["<!--\r\n * @Description: \r\n * @version: \r\n * @Author: HeZhen\r\n * @Date: 2020-11-16 15:42:04   \r\n * @LastEditors: HeZhen\r\n * @LastEditTime: 2021-02-23 10:55:25\r\n-->\r\n\r\n<template>\r\n    <div class=\"brushing_other flexC\">\r\n        <div @click=\"back\" :style=\"{ top: phoneStatusHeight }\" class=\"headerBack posiImg\"></div>\r\n        <!-- 音乐图标 -->\r\n        <span @touchstart=\"movestart($event)\" @touchend=\"movend($event)\" @touchmove=\"move($event)\" @click=\"clickMusic(true)\" :style=\"{ left: bindX, top: bindY }\" :class=\"openMusic ? 'img bg' : 'img bg img_close'\" ref=\"img\"></span>\r\n        <!-- 刷牙引导 -->\r\n        <div class=\"banner\">\r\n            <video id=\"_v\" :src=\"src\" :muted=\"muted\" class=\"video\" style=\"object-fit: fill\" preload></video>\r\n        </div>\r\n        <!-- 0:设备无电 1:连续刷牙 2: 刷牙时间大于10s小于45s 3: 刷牙时间小于10s  :visiable=\"visiable > -1\" -->\r\n        <Dialog v-if=\"visiable > -1\" :knows=\"visiable > -1 ? dialogText[visiable].knows : dialogText[0].knows\" :countDown=\"\r\n        visiable > -1 ? dialogText[visiable].countDown : dialogText[0].countDown\r\n      \" @sendData=\"sendData\">\r\n            <template v-if=\"visiable > -1\" slot=\"title\">{{\r\n        dialogText[visiable].title\r\n      }}</template>\r\n            <template v-if=\"visiable > -1\" slot=\"often\">{{\r\n        dialogText[visiable].often\r\n      }}</template>\r\n            <template v-if=\"visiable > -1\" slot=\"tipText\">{{\r\n        dialogText[visiable].tipText\r\n      }}</template>\r\n            <template v-if=\"visiable > -1\" slot=\"subtipText\">{{\r\n        dialogText[visiable].subtipText\r\n      }}</template>\r\n        </Dialog>\r\n        <!-- <div class=\"aaa\">{{binData}}</div> -->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport g from \"../../Util/global\";\r\nimport { scale } from \"../../Util/tool\";\r\nimport reportData from \"../../Util/reportData\";\r\n\r\nexport default {\r\n    name: \"Brushing_other\",\r\n    inject: [\"reload\"],\r\n    data() {\r\n        return {\r\n            // 定时器\r\n            setInterval: \"\",\r\n            src: \"\",\r\n            muted: true,\r\n            brushHeader: null,\r\n            // 刷牙时长\r\n            brushinglen: \"\",\r\n            // 手机头部状态栏高度\r\n            phoneStatusHeight: 0,\r\n            // music 图标的属性设置\r\n            bindX: 200,\r\n            bindY: 80,\r\n            offset: {\r\n                x: 0,\r\n                y: 0,\r\n            },\r\n            diff: {\r\n                x: 0,\r\n                y: 0,\r\n            },\r\n            // 音乐开关\r\n            openMusic: false,\r\n\r\n            // 弹窗提示语\r\n            dialogText: [\r\n                {\r\n                    // 无电 0\r\n                    title: \"\",\r\n                    often: \"\",\r\n                    tipText: this.$t(\"brushing.tipText\"),\r\n                    subtipText: \"\",\r\n                    countDown: \"img\",\r\n                    knows: false,\r\n                },\r\n                {\r\n                    // 频繁刷牙 1\r\n                    title: this.$t(\"brushing.title\"),\r\n                    often: this.$t(\"brushing.tipText2\"),\r\n                    tipText: \"\",\r\n                    subtipText: \"\",\r\n                    countDown: \"text\",\r\n                    knows: true,\r\n                },\r\n                {\r\n                    // U型刷牙不足10s 2\r\n                    title: this.$t(\"brushing.title2\"),\r\n                    often: \"\",\r\n                    tipText: this.$t(\"brushing.tipText4\"),\r\n                    subtipText: this.$t(\"brushing.subtipText\"),\r\n                    countDown: \"svg\",\r\n                    knows: true,\r\n                },\r\n                {\r\n                    // U型刷牙大于10s 小于45s 3\r\n                    title: this.$t(\"brushing.title2\"),\r\n                    often: \"\",\r\n                    tipText: this.$t(\"brushing.tipText3\"),\r\n                    subtipText: this.$t(\"brushing.subtipText\"),\r\n                    countDown: \"svg\",\r\n                    knows: true,\r\n                },\r\n                {\r\n                    // I型刷牙不足30s 4\r\n                    title: this.$t(\"brushing.title2\"),\r\n                    often: \"\",\r\n                    tipText: this.$t(\"brushing.tipTextI30\"),\r\n                    subtipText: this.$t(\"brushing.subtipText\"),\r\n                    countDown: \"svg\",\r\n                    knows: true,\r\n                },\r\n                {\r\n                    // I型刷牙大于30s 小于120s 5\r\n                    title: this.$t(\"brushing.title2\"),\r\n                    often: \"\",\r\n                    tipText: this.$t(\"brushing.tipTextI120\"),\r\n                    subtipText: this.$t(\"brushing.subtipText\"),\r\n                    countDown: \"svg\",\r\n                    knows: true,\r\n                },\r\n            ],\r\n            // 判断弹窗出现的类型\r\n            visiable: -1,\r\n            // 20% 电量\r\n            parcent20: false,\r\n            userDefined: true, // 自定义结束刷牙\r\n            inquire: true,\r\n            // 用于判断同一次刷牙\r\n            t: 0,\r\n            startTime: 0\r\n\r\n        };\r\n    },\r\n    computed: {\r\n        //蓝牙连接 propperty\r\n        bleConnected() {\r\n            return this.$store.state.BleStatus.bleConnected;\r\n        },\r\n        binData() {\r\n            return this.$store.state.BleStatus.binData;\r\n        },\r\n    },\r\n    watch: {\r\n        dialogText: {\r\n            deep: true,\r\n            handler: (n, o) => { },\r\n        },\r\n        visiable(n, o) {\r\n            if (n > 0) {\r\n                this.setVideoPlay(false, null)\r\n                this.removeVideoPlay()\r\n            }\r\n            if (n === -1) {\r\n                this.userDefined = true;\r\n            }\r\n        },\r\n        bleConnected(n, o) {\r\n            if (n) {\r\n                this.getPhoneStatusHeight();\r\n            }\r\n        },\r\n        binData(n, o) { // 5601000102\r\n            if (this.userDefined) {\r\n                this.standardBrushingTime()\r\n            }\r\n        },\r\n        openMusic(n, o) {\r\n            this.muted = !n;\r\n        },\r\n    },\r\n    created() {\r\n\r\n    },\r\n    mounted() {\r\n        if (this.bleConnected) {\r\n            this.initPages();\r\n        }\r\n        let node = document.querySelector('.VideoPopu') || null;\r\n        if (node) {\r\n            node.parentNode.removeChild(node)\r\n        }\r\n    },\r\n    beforeDestroy() {\r\n        if (scale.hextoBin(this.binData.substr(4, 2))[7] === '1') {\r\n            this.back()\r\n        }\r\n        window.hilink && window.hilink.setRequestedOrientation && window.hilink.setRequestedOrientation(false);\r\n    },\r\n    destroyed() {\r\n        this.recordOutTime()\r\n    },\r\n    methods: {\r\n        /**\r\n         * @description: 初始化页面\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        initPages() {\r\n            this.judgeBoothHeader();\r\n            this.getPhoneStatusHeight();\r\n            this.phoneScreenDirection(true);\r\n            this.clickMusic(false);\r\n            this.setVideoPlay(true, parseInt(this.binData.substr(6, 2), 16));\r\n            this.machineNopower()\r\n            let isSame = this.isSameBrushing()\r\n            if (!isSame) {\r\n                setTimeout(() => {\r\n                    this.oftenBrushing()\r\n                }, 1000);\r\n            }\r\n            this.onVideoPlay()\r\n        },\r\n\r\n        /**\r\n         * @description: 音乐图标\r\n         * @param {Boolean} init 表示初始化 false 还是点击事件\r\n         * @return {*}\r\n         */\r\n        clickMusic(init) {\r\n            let _ = this;\r\n            let v = document.querySelector(\"#_v\");\r\n            let srcCode = scale.hextoBin(this.binData.substr(4, 2));\r\n            if (init) {\r\n                _.removeVideoPlay()\r\n                _.openMusic = !_.openMusic;\r\n                let musicKey = _.openMusic ? \"1\" : \"0\";\r\n                srcCode = scale.hextoBin(_.binData.substr(4, 2));\r\n                let setCode = scale.checkData(6, musicKey, srcCode);\r\n                g.setQueue(setCode);\r\n                setTimeout(() => {\r\n                    _.onVideoPlay()\r\n                }, 1500);\r\n                return true;\r\n            }\r\n            _.openMusic = srcCode[6] === \"0\" ? false : true;\r\n            _.muted = !_.openMusic;\r\n        },\r\n\r\n        /**\r\n         * @description: Dialog 弹窗下发事件\r\n         * @param {Object} val 下发的值\r\n         * @return {*}\r\n         */\r\n        sendData(val) {\r\n            if (val.goOn && val.goOn === true) {\r\n                this._goOn()\r\n            }\r\n            if (val.finishOver && val.finishOver === true) {\r\n                this.visiable === 3 || this.visiable === 5 ? this._finishOver(true) : this._finishOver()\r\n            }\r\n            this.visiable = -1;\r\n        },\r\n\r\n        /**\r\n         * @description: 返回箭头\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        back() {\r\n            if (this.visiable > -1) {\r\n                return true;\r\n            }\r\n            this.removeVideoPlay()\r\n            let data = { videoType: this.brushHeader, save: true, src: this.src }\r\n            this.$video.show(data)\r\n            window.hilink && window.hilink.setRequestedOrientation && window.hilink.setRequestedOrientation(false);\r\n            this.$router.push({ path: '/' })\r\n        },\r\n\r\n        /**\r\n         * @description:  手机头部状态栏高度\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        getPhoneStatusHeight() {\r\n            window.getStatusBarHeightCallback = (res) => {\r\n                res = JSON.parse(res);\r\n                this.phoneStatusHeight = res.statusBarHeight + 10 + \"px\";\r\n            };\r\n            window.hilink && window.hilink.getStatusBarHeight && window.hilink.getStatusBarHeight(\"getStatusBarHeightCallback\");\r\n        },\r\n\r\n\r\n        /**\r\n         * @description: 鼠标按下事件\r\n         * @param {Object} e 鼠标事件源\r\n         * @return {*}\r\n         */\r\n        movestart(e) {\r\n            // 记录 ref=img 元素的起始位置\r\n            this.offset.x = this.$refs.img.offsetLeft;\r\n            this.offset.y = this.$refs.img.offsetTop;\r\n            this.diff.x = e.changedTouches[0].clientX;\r\n            this.diff.y = e.changedTouches[0].clientY;\r\n        },\r\n\r\n        /**\r\n         * @description: 鼠标移动事件\r\n         * @param {Object} e 鼠标事件源\r\n         * @return {*}\r\n         */\r\n        move(e) {\r\n            let x = this.offset.x + e.changedTouches[0].clientX - this.diff.x; // 计算新的元素left值\r\n            let y = this.offset.y + e.changedTouches[0].clientY - this.diff.y;\r\n            if (x < 0) {\r\n                x = 0;\r\n            } else if (x > document.body.clientWidth - this.$refs.img.clientHeight) {\r\n                x = document.body.clientWidth - this.$refs.img.clientHeight;\r\n            }\r\n            if (y < 0) {\r\n                y = 0;\r\n            } else if (y > document.body.clientHeight - this.$refs.img.clientHeight) {\r\n                y = document.body.clientHeight - this.$refs.img.clientHeight;\r\n            }\r\n            this.bindX = x + \"px\";\r\n            this.bindY = y + \"px\";\r\n        },\r\n\r\n        /**\r\n         * @description: 鼠标抬起事件\r\n         * @param {Object} e 鼠标事件源\r\n         * @return {*}\r\n         */\r\n        movend(e) { },\r\n\r\n        /**\r\n         * @description: 判断刷头 决定视频类型\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        judgeBoothHeader() {\r\n            let videoSrcs = [['https://www.kinyooo.com/media/2DChinese.mp4', 'https://www.kinyooo.com/media/3DChinese.mp4'], ['https://www.kinyooo.com/media/2DEnglish.mp4', 'https://www.kinyooo.com/media/3DEnglish.mp4']]\r\n            this.brushHeader = scale.hextoBin(this.binData.substr(4, 2))[5];\r\n            let pre = 0, next = 0;\r\n            pre = this.$i18n.locale === 'zh' ? 0 : 1;\r\n            next = this.brushHeader === '0' ? 1 : 0;\r\n            this.src = videoSrcs[pre][next];//videoSrcs[pre][next]\r\n        },\r\n\r\n        /**\r\n         * @description: 判断刷牙是否是频繁刷牙\r\n         * @param {Number} time \r\n         * @return {*}\r\n         */\r\n        oftenBrushing() {\r\n            //this.isSameMac()\r\n            this.removeVideoPlay()\r\n            if (this.$route.query.from) {\r\n                this.onVideoPlay()\r\n                return true;\r\n            }\r\n            let nowDate = new Date().getTime();\r\n            let oftenBrushing = JSON.parse(localStorage.getItem(`${window.devId}`)) || [];\r\n            if (oftenBrushing.length > 0 && oftenBrushing.length === 2) {\r\n                this.visiable = nowDate - oftenBrushing[1] < 10 * 60 * 1000 ? 1 : -1;\r\n                if (this.visiable === 1) {\r\n                    this.userDefined = false;\r\n                    this.setVideoPlay(false, null)\r\n                    let src = scale.hextoBin(this.binData.substr(4, 2));\r\n                    let setCode = scale.checkData(7, '0', src);\r\n                    g.setQueue(setCode)\r\n                } else {\r\n                    this.onVideoPlay()\r\n                }\r\n            } else {\r\n                this.onVideoPlay()\r\n            }\r\n        },\r\n\r\n        isSameMac() {\r\n            let mac = JSON.parse(localStorage.getItem('mac')) || '';\r\n            let oftenBrushing = [];\r\n            if (mac != window.devId) {\r\n                localStorage.setItem('oftenBrushing', JSON.stringify(oftenBrushing))\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @description: 设备无电弹窗 parseInt(this.binData.substr(2, 2), 16) <= 1 ? 0 : -1\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        machineNopower() {\r\n            this.visiable = parseInt(this.binData.substr(2, 2), 16) <= 1 ? 0 : -1;\r\n        },\r\n\r\n        /**\r\n         * @description: 频繁刷牙,无效刷牙10s 30s弹窗 点击结束刷牙按钮处理函数\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        _finishOver(bool = false) {\r\n            this.phoneScreenDirection(false)\r\n            this.removeVideoPlay()\r\n            if (bool) {\r\n                let oftenBrushing = JSON.parse(localStorage.getItem(`${window.devId}`)) || [];\r\n                if (oftenBrushing.length < 2) {\r\n                    oftenBrushing.push(new Date().getTime());\r\n                } else {\r\n                    [oftenBrushing[0], oftenBrushing[1]] = [oftenBrushing[1], new Date().getTime()];\r\n                }\r\n                localStorage.setItem(`${window.devId}`, JSON.stringify(oftenBrushing))\r\n                this.$router.push({ path: \"/logDetail\", query: { bin: scale.hextoBin(this.binData.substr(6, 2)), newest: this.brushHeader } });\r\n            } else {\r\n                this.$router.push({ path: '/' })\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * @description:  点击继续刷牙按钮处理函数\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        _goOn() {\r\n            let srcCode = scale.hextoBin(this.binData.substr(4, 2))\r\n            let setCode = scale.checkData(7, '1', srcCode)\r\n            g.setQueue(setCode)\r\n            this.setVideoPlay(true, 0)\r\n            setTimeout(() => {\r\n                this.onVideoPlay()\r\n            }, 1000);\r\n        },\r\n\r\n        /**\r\n        * @description: 判断刷牙时长是否符合规范\r\n        * @param {*}\r\n        * @return {*}\r\n        */\r\n        standardBrushingTime() {\r\n            if (scale.hextoBin(this.binData.substr(4, 2))[7] === '1' || this.userDefined === false) {\r\n                return true;\r\n            }\r\n            let time = parseInt(this.binData.substr(6, 2), 16)\r\n            if (time < 10 && this.brushHeader === '0') {\r\n                this.visiable = 2;\r\n                return true;\r\n            }\r\n            if (time < 45 && this.brushHeader === '0') {\r\n                this.visiable = 3;\r\n                return true;\r\n            }\r\n            if (time < 30 && this.brushHeader === '1') {\r\n                this.visiable = 4;\r\n                return true;\r\n            }\r\n            if (time < 120 && this.brushHeader === '1') {\r\n                this.visiable = 5;\r\n                return true;\r\n            }\r\n            this.phoneScreenDirection(false)\r\n            let oftenBrushing = JSON.parse(localStorage.getItem(`${window.devId}`)) || [];\r\n            if (oftenBrushing.length < 2) {\r\n                oftenBrushing.push(new Date().getTime());\r\n            } else {\r\n                [oftenBrushing[0], oftenBrushing[1]] = [oftenBrushing[1], new Date().getTime()];\r\n            }\r\n            localStorage.setItem(`${window.devId}`, JSON.stringify(oftenBrushing))\r\n            this.$router.push({ path: \"/logDetail\", query: { bin: scale.hextoBin(this.binData.substr(6, 2)), newest: this.brushHeader } });\r\n        },\r\n\r\n        /**\r\n         * @description: 视频 控制播放\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        setVideoPlay(play, time = null) {\r\n            let v = document.querySelector(\"#_v\");\r\n            if (play) {\r\n                v.currentTime = time ? time : 0;\r\n                setTimeout(() => {\r\n                    v.play();\r\n                }, 5);\r\n                return true;\r\n            } else {\r\n                v.pause();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        /**\r\n         * @description: 监听视频播放事件 \r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        onVideoPlay() {\r\n            let _ = this;\r\n            let v = document.querySelector(\"#_v\");\r\n            _.inquire = true;\r\n            v.addEventListener(\r\n                \"timeupdate\",\r\n                _.addEventListenerArg,\r\n                false\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @description: 监听视频播放事件 \r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        removeVideoPlay() {\r\n            let _ = this;\r\n            let v = document.querySelector(\"#_v\");\r\n            _.inquire = false;\r\n            v.removeEventListener(\r\n                \"timeupdate\",\r\n                _.addEventListenerArg,\r\n                false\r\n            );\r\n        },\r\n\r\n        /**\r\n         * @description: 监听视频播放事件，监听第二位参数\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        addEventListenerArg() {\r\n            let v = document.querySelector(\"#_v\");\r\n            if (!this.inquire) {\r\n                return true;\r\n            }\r\n            if (v && parseInt(v.currentTime) % 2 === 0) {\r\n                g.setQueue('55')\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @description: 手机屏幕方向\r\n         * @param {Boolean} dir  fasle 竖 true 横\r\n         * @return {*}\r\n         */\r\n        phoneScreenDirection(dir) {\r\n            window.hilink && window.hilink.setRequestedOrientation && window.hilink.setRequestedOrientation(dir);\r\n        },\r\n\r\n        /**\r\n         * @description: 记录牙刷退出页面时间 [a,b]\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        recordOutTime() {\r\n            let recordOutTime = [];\r\n            [].push.apply(recordOutTime, [new Date().getTime(), (parseInt(this.binData.substr(6, 2), 16) * 1000)])\r\n            localStorage.setItem('outTime', JSON.stringify(recordOutTime))\r\n        },\r\n\r\n        /**\r\n         * @description: 判断两次进入页面是否为同一次刷牙\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        isSameBrushing() {\r\n            let outTime = JSON.parse(localStorage.getItem('outTime')) || [];\r\n            let isSame = Math.abs(new Date().getTime() - outTime[0] - (parseInt(this.binData.substr(6, 2), 16) * 1000 - outTime[1]));\r\n            if (isSame < 3000) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    },\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n<style lang='less' scoped>\r\n.brushing_other {\r\n    .aaa {\r\n        position: absolute;\r\n        top: 220px;\r\n        left: 220px;\r\n        z-index: 999999999;\r\n    }\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: #96b6e6;\r\n    position: relative;\r\n    .headerBack {\r\n        background-image: url(\"../../Images/light/videoBack.png\");\r\n        width: 24px;\r\n        height: 24px;\r\n        position: fixed;\r\n        left: 24px;\r\n        z-index: 99;\r\n    }\r\n    .img {\r\n        position: absolute;\r\n        display: inline-block;\r\n        width: 38px;\r\n        height: 38px;\r\n        left: 301px;\r\n        top: 80px;\r\n        border-radius: 50%;\r\n        z-index: 99;\r\n        background-color: #fff;\r\n        background-image: url(\"../../Images/light/music_on.png\");\r\n    }\r\n    .img_close {\r\n        background-image: url(\"../../Images/light/music_close.png\");\r\n    }\r\n    .banner {\r\n        height: 100%;\r\n        width: 100%;\r\n        .video {\r\n            position: fixed;\r\n            width: 100%;\r\n            height: 100%;\r\n            top: 0;\r\n            left: 0;\r\n            right: 0;\r\n            bottom: 0;\r\n            z-index: 9;\r\n        }\r\n    }\r\n    .footer {\r\n        width: 100%;\r\n        height: 115px;\r\n        background-color: #fff;\r\n        overflow: hidden;\r\n        position: relative;\r\n        color: rgba(0, 0, 0, 0.9);\r\n        .low_bettery {\r\n            position: absolute;\r\n            bottom: 37px;\r\n            left: 50%;\r\n            transform: translate(-50%, 0);\r\n            display: inline-block;\r\n            width: 100%;\r\n            height: 27px;\r\n            font-size: 16px;\r\n            z-index: 99;\r\n            padding: 0 0 41px 0;\r\n            span {\r\n                display: inline-block;\r\n                width: 100%;\r\n                text-align: center;\r\n                line-height: 24px;\r\n            }\r\n        }\r\n    }\r\n    .low_backC {\r\n        color: rgb(251, 42, 45, 0.9);\r\n        background-color: #fff4f4;\r\n    }\r\n}\r\n.flex {\r\n    display: flex;\r\n    flex-direction: row;\r\n}\r\n.flexC {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n.posiImg {\r\n    background-size: 100% 100%;\r\n    background-repeat: no-repeat;\r\n    background-position: center center;\r\n    position: absolute;\r\n}\r\n.position_center {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n}\r\n.font24 {\r\n    font-size: 24px;\r\n}\r\n.font16 {\r\n    font-size: 16px;\r\n}\r\n.font12 {\r\n    font-size: 12px;\r\n}\r\n\r\n.theme-dark {\r\n    .brushing_other {\r\n        background-color: #96b6e6;\r\n        .header {\r\n            .header_inner {\r\n                color: rgba(0, 0, 0, 0.9);\r\n            }\r\n        }\r\n        .subheader {\r\n            color: rgba(0, 0, 0, 0.9);\r\n        }\r\n        .img {\r\n            background-color: #484848;\r\n        }\r\n        .banner {\r\n            .centerImg {\r\n                .circle {\r\n                    .time {\r\n                        color: rgba(255, 255, 255, 0.9);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .footer {\r\n            background-color: #000000;\r\n            color: rgba(255, 255, 255, 0.86);\r\n        }\r\n        .low_backC {\r\n            color: #e64548;\r\n            background-color: #372222;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}