{"remainingRequest":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\OMROM\\aiweijie\\aiweijie\\src\\Toast\\VideoPopu\\VideoPopu.vue?vue&type=style&index=0&id=5c591b5e&lang=less&scoped=true&","dependencies":[{"path":"E:\\OMROM\\aiweijie\\aiweijie\\src\\Toast\\VideoPopu\\VideoPopu.vue","mtime":1616635982885},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5WaWRlb1BvcHUgew0KICAgIHotaW5kZXg6IDk5OTk5Ow0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB3aWR0aDogMTkwcHg7DQogICAgaGVpZ2h0OiA5MHB4Ow0KICAgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTsNCiAgICAudmlkZW9kaWFsb2cgew0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgIH0NCiAgICAvLyAuY2xvc2Ugew0KICAgIC8vICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgLy8gICAgIHdpZHRoOiAyNHB4Ow0KICAgIC8vICAgICBoZWlnaHQ6IDI0cHg7DQogICAgLy8gICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiLi4vLi4vSW1hZ2VzL3Rlc3QvY2xvc2UucG5nIik7DQogICAgLy8gICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7DQogICAgLy8gICAgIGJhY2tncm91bmQtc2l6ZTogMTAwJSAxMDAlOw0KICAgIC8vICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgLy8gICAgIHRvcDogLTEycHg7DQogICAgLy8gICAgIGxlZnQ6IC0xMnB4Ow0KICAgIC8vIH0NCn0NCg=="},{"version":3,"sources":["VideoPopu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VideoPopu.vue","sourceRoot":"src/Toast/VideoPopu","sourcesContent":["<!--\r\n * @Description: 实时引导小视频\r\n * @version: \r\n * @Author: HeZhen\r\n * @Date: 2020-12-07 15:02:03\r\n * @LastEditors: HeZhen\r\n * @LastEditTime: 2021-02-23 10:55:54\r\n-->\r\n<template>\r\n    <div :style=\"{left: bindX,top: bindY}\" class=\"VideoPopu\" ref=\"pop\" v-if=\"visible\" @click=\"bigView\" @touchstart=\"movestart($event)\" @touchend=\"movend($event)\" @touchmove=\"move($event)\">\r\n        <!-- <span @click.stop=\"closeVideo\" class=\"close\"></span> -->\r\n        <video id=\"_src\" muted :src=\"src\" class=\"videodialog\" style=\"object-fit: fill\" x5-video-player-type=\"h5\" preload x5-video-orientation=\"landscape_left\"></video>\r\n    </div>\r\n</template>\r\n<script>\r\nimport g from \"../../Util/global\";\r\nimport { scale, brushingHistory } from \"../../Util/tool\";\r\nexport default {\r\n    name: \"VideoPopu\",\r\n    data() {\r\n        return {\r\n            visible: false,\r\n            src: '',\r\n            videoCurrent: 0,\r\n            videoType: '-1',\r\n            brushinglen: '',\r\n            setInterval: null,\r\n            bindX: '190px',\r\n            bindY: '140px',\r\n            offset: {\r\n                x: 0,\r\n                y: 0,\r\n            },\r\n            diff: {\r\n                x: 0,\r\n                y: 0,\r\n            },\r\n            inquire: true,\r\n            save: true\r\n        };\r\n    },\r\n    computed: {\r\n        binData() {\r\n            return this.$store.state.BleStatus.binData;\r\n        },\r\n        header() {\r\n            return scale.hextoBin(this.binData.substr(4, 2))[5]\r\n        }\r\n    },\r\n    watch: {\r\n        binData(n, o) {\r\n            if (scale.hextoBin(n.substr(4, 2))[7] === '0' && this.save) {\r\n                this.standardBrushingTime()\r\n            }\r\n        },\r\n        videoType(n, o) {\r\n            if (n != -1) this.init()\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n    },\r\n    beforeDestroy() {\r\n        this.videoType = '-1';\r\n        this.visible = false;\r\n    },\r\n\r\n    methods: {\r\n        /**\r\n         * @description:  初始化\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        init() {\r\n            let _ = this;\r\n            setTimeout(() => {\r\n                let videoSrcs = [['https://www.kinyooo.com/media/2DChinese.mp4', 'https://www.kinyooo.com/media/3DChinese.mp4'], ['https://www.kinyooo.com/media/2DEnglish.mp4', 'https://www.kinyooo.com/media/3DEnglish.mp4']];\r\n                let pre = this.$i18n.locale === 'zh' ? 0 : 1;\r\n                _.$nextTick(() => {\r\n                    let v = document.getElementById('_src');\r\n                    v.currentTime = parseInt(_.binData.substr(6, 2), 16);\r\n                    let next = scale.hextoBin(_.binData.substr(4, 2))[5] === '0' ? 1 : 0;\r\n                    _.src = videoSrcs[pre][next];\r\n                    setTimeout(() => {\r\n                        v.play();\r\n                        g.onVideoPlay()\r\n                    });\r\n                })\r\n            });\r\n        },\r\n        /**\r\n         * @description:  返回大视频\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        bigView() {\r\n            g.removeVideoPlay()\r\n            this.visible = false;\r\n            this.save = false;\r\n            this.videoType = '-1';\r\n            window.hilink.setRequestedOrientation(true);\r\n            this.$router.push({ path: '/guide_adult', query: { from: true } });\r\n        },\r\n\r\n        /**\r\n         * @description: 监听视频播放结束事件\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        onVideoPlayEnded() {\r\n            let _ = this;\r\n            let v = document.querySelector(\"#_src\");\r\n            v.addEventListener(\r\n                \"ended\",\r\n                () => {\r\n                    g.removeVideoPlay()\r\n                    window.hilink.setRequestedOrientation(false);\r\n                    this.videoType = '-1';\r\n                    this.save = false;\r\n                    this.visible = false;\r\n                    _.$router.push({ path: \"/logDetail\", query: { bin: scale.hextoBin(_.binData.substr(6, 2)), newest: scale.hextoBin(this.binData.substr(4, 2))[5] } });\r\n                    //this.$destroy()\r\n                },\r\n                false\r\n            );\r\n        },\r\n\r\n\r\n\r\n        /**\r\n         * @description: 判断刷牙时长是否符合规范\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        standardBrushingTime() {\r\n            //this.removeVideoPlay()\r\n            g.removeVideoPlay()\r\n            let len = parseInt(this.binData.substr(6, 2), 16);\r\n            if (this.videoType === '1' && len < 30) {\r\n                this.videoType = '-1';\r\n                this.save = false;\r\n                this.visible = false;\r\n                return true;\r\n            }\r\n            if (this.videoType === '0' && len < 10) {\r\n                this.videoType = '-1';\r\n                this.save = false;\r\n                this.visible = false;\r\n                return true;\r\n            }\r\n            this.videoType = '-1';\r\n            this.visible = false;\r\n            this.save = false;\r\n            this.$router.push({ path: \"/logDetail\", query: { bin: scale.hextoBin(this.binData.substr(6, 2)), newest: scale.hextoBin(this.binData.substr(4, 2))[5] } });\r\n            //this.$destroy()\r\n        },\r\n\r\n\r\n        /**\r\n         * @description: 鼠标按下事件\r\n         * @param {Object} e 鼠标事件源\r\n         * @return {*}\r\n         */\r\n        movestart(e) {\r\n            // 记录 ref=img 元素的起始位置\r\n            this.offset.x = this.$refs.pop.offsetLeft;\r\n            this.offset.y = this.$refs.pop.offsetTop;\r\n            this.diff.x = e.changedTouches[0].clientX;\r\n            this.diff.y = e.changedTouches[0].clientY;\r\n        },\r\n\r\n        /**\r\n         * @description: 鼠标移动事件\r\n         * @param {Object} e 鼠标事件源\r\n         * @return {*}\r\n         */\r\n        move(e) {\r\n            let x = this.offset.x + e.changedTouches[0].clientX - this.diff.x; // 计算新的元素left值\r\n            let y = this.offset.y + e.changedTouches[0].clientY - this.diff.y;\r\n            if (x < 0) {\r\n                x = 0;\r\n            } else if (\r\n                x >\r\n                document.body.clientWidth - this.$refs.pop.clientHeight\r\n            ) {\r\n                x = document.body.clientWidth - this.$refs.pop.clientHeight;\r\n            }\r\n            if (y < 0) {\r\n                y = 0;\r\n            } else if (\r\n                y >\r\n                document.body.clientHeight - this.$refs.pop.clientHeight\r\n            ) {\r\n                y = document.body.clientHeight - this.$refs.pop.clientHeight;\r\n            }\r\n            this.bindX = x + \"px\";\r\n            this.bindY = y + \"px\";\r\n        },\r\n\r\n        /**\r\n         * @description: 鼠标抬起事件\r\n         * @param {Object} e 鼠标事件源\r\n         * @return {*}\r\n         */\r\n        movend(e) {\r\n        },\r\n\r\n        /**\r\n         * @description: 监听视频播放事件，监听第二位参数\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        addEventListenerArg() {\r\n            let v = document.querySelector(\"#_src\") || null;\r\n            if (v && parseInt(v.currentTime, 10) % 2 === 0) {\r\n                g.setQueue('55')\r\n            }\r\n        },\r\n    },\r\n};\r\n</script>\r\n<style lang='less' scoped>\r\n.VideoPopu {\r\n    z-index: 99999;\r\n    position: absolute;\r\n    width: 190px;\r\n    height: 90px;\r\n    transform: rotate(90deg);\r\n    .videodialog {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    // .close {\r\n    //     display: inline-block;\r\n    //     width: 24px;\r\n    //     height: 24px;\r\n    //     background-image: url(\"../../Images/test/close.png\");\r\n    //     background-repeat: no-repeat;\r\n    //     background-size: 100% 100%;\r\n    //     position: absolute;\r\n    //     top: -12px;\r\n    //     left: -12px;\r\n    // }\r\n}\r\n</style>\r\n"]}]}