{"remainingRequest":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\babel-loader\\lib\\index.js!E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\OMROM\\aiweijie\\aiweijie\\src\\mixins\\bleConnect.js","dependencies":[{"path":"E:\\OMROM\\aiweijie\\aiweijie\\src\\mixins\\bleConnect.js","mtime":1616635983024},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LWJ1ZmZlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovT01ST00vYWl3ZWlqaWUvYWl3ZWlqaWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwoKLyoNCiAqIEBEZXNjcmlwdGlvbjog6JOd54mZ6L+e5o6l6L+H56iLDQogKiBAdmVyc2lvbjogDQogKiBAQXV0aG9yOiBIZVpoZW4NCiAqIEBEYXRlOiAyMDIwLTEyLTExIDExOjAyOjI0DQogKiBATGFzdEVkaXRvcnM6IEhlWmhlbg0KICogQExhc3RFZGl0VGltZTogMjAyMS0wMy0wMiAxNDowODozNA0KICovCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGcgZnJvbSAnLi4vVXRpbC9nbG9iYWwnOwppbXBvcnQgeyBzY2FsZSB9IGZyb20gJy4uL1V0aWwvdG9vbCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gc2VydmljZUlkOiAiNmU0MDAwMDEtYjVhMy1mMzkzLWUwYTktZTUwZTI0ZGNjYTllIiwKICAgICAgLy8gcmVhZENoYXJhY3RlcmlzdGljSWQ6ICI2ZTQwMDAwMy1iNWEzLWYzOTMtZTBhOS1lNTBlMjRkY2NhOWUiLAogICAgICAvLyB3cml0ZUNoYXJhY3RlcmlzdGljSWQ6ICI2ZTQwMDAwMi1iNWEzLWYzOTMtZTBhOS1lNTBlMjRkY2NhOWUiLAogICAgICBkZXZpY2VJZDogbnVsbCwKICAgICAgc2VydmljZUlkOiAiMDAwMGZmYjAtMDAwMC0xMDAwLTgwMDAtMDA4MDVmOWIzNGZiIiwKICAgICAgd3JpdGVDaGFyYWN0ZXJpc3RpY0lkOiAiMDAwMGZmYjEtMDAwMC0xMDAwLTgwMDAtMDA4MDVmOWIzNGZiIiwKICAgICAgcmVhZENoYXJhY3RlcmlzdGljSWQ6ICIwMDAwZmZiMi0wMDAwLTEwMDAtODAwMC0wMDgwNWY5YjM0ZmIiLAogICAgICBibGVDb25uZWN0ZWQ6ICcnLAogICAgICBoaXN0b3J5TG9nOiAnJywKICAgICAgaW5pdEdldERhdGE1ODogdHJ1ZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyDmlbDmja7ooajnpLogNTUgNTgKICAgIHdpbmRvdy50eXBlNTUgPSBmYWxzZTsKICAgIHdpbmRvdy50eXBlNTggPSB0cnVlOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHdpbmRvdy50MCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAvL2NvbnNvbGUubG9nKCfpgLLlhaXpoIHpnaInLCAwKTsKCiAgICB0aGlzLm9uQkxFQ29ubmVjdGlvblN0YXRlQ2hhbmdlKCk7IC8vIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5zZXRUaXRsZVZpc2libGUgJiYgd2luZG93LmhpbGluay5zZXRUaXRsZVZpc2libGUoZmFsc2UpOwoKICAgIHRoaXMub25CbHVldG9vdGhBZGFwdGVyU3RhdGVDaGFuZ2UoKTsKICAgIHRoaXMuZ2V0Qmx1ZXRvb3RoQWRhcHRlclN0YXRlKCk7CiAgICB0aGlzLm9wZW5CbHVldG9vdGhBZGFwdGVyKCk7CiAgfSwKICBjb21wdXRlZDogewogICAgY29ubmVjdGVkOiBmdW5jdGlvbiBjb25uZWN0ZWQoKSB7CiAgICAgIC8v5bey6L+e5o6lCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5CbGVTdGF0dXMuYmxlQ29ubmVjdGVkOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGNvbm5lY3RlZDogZnVuY3Rpb24gY29ubmVjdGVkKG4sIG8pIHsKICAgICAgLy/lt7Lov57mjqUKICAgICAgaWYgKG4pIHsvL3RoaXMud3JpdGVEYXRhKCc1NScpCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucyh7CiAgICBjYWxsX3VwZGF0ZV9ibGVDb25uZWN0ZWQ6ICdCbGVTdGF0dXMvY2FsbF91cGRhdGVfYmxlQ29ubmVjdGVkJywKICAgIGNhbGxfdXBkYXRlX2JpbkRhdGE6ICdCbGVTdGF0dXMvY2FsbF91cGRhdGVfYmluRGF0YScsCiAgICBjYWxsX3VwZGF0ZV9sb2dEYXRhOiAnQmxlU3RhdHVzL2NhbGxfdXBkYXRlX2xvZ0RhdGEnCiAgfSkpLCB7fSwgewogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uOiDok53niZnov57mjqXnrKzkuIDmraUg6I635Y+W6K6+5aSH6JOd54mZ5qih5Z2X54q25oCBDQogICAgICogQHBhcmFtIHsqfQ0KICAgICAqIEByZXR1cm4geyp9DQogICAgICovCiAgICBnZXRCbHVldG9vdGhBZGFwdGVyU3RhdGU6IGZ1bmN0aW9uIGdldEJsdWV0b290aEFkYXB0ZXJTdGF0ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5nZXRCbHVldG9vdGhBZGFwdGVyU3RhdGUgJiYgd2luZG93LmhpbGluay5nZXRCbHVldG9vdGhBZGFwdGVyU3RhdGUoImdldEJsdWV0b290aEFkYXB0ZXJTdGF0ZUNhbGxiYWNrIik7CgogICAgICB3aW5kb3cuZ2V0Qmx1ZXRvb3RoQWRhcHRlclN0YXRlQ2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHJlcyk7CgogICAgICAgIGlmIChkYXRhLmF2YWlsYWJsZSkgewogICAgICAgICAgX3RoaXMuZ2V0Q3VycmVudFJlZ2lzdGVyZWREZXZpY2UoKTsKCiAgICAgICAgICBfdGhpcy5zZWFyY2hEZXZpY2VzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCcnKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbjog5omT5byA6JOd54mZDQogICAgICogQHBhcmFtIHsqfQ0KICAgICAqIEByZXR1cm4geyp9DQogICAgICovCiAgICBvcGVuQmx1ZXRvb3RoQWRhcHRlcjogZnVuY3Rpb24gb3BlbkJsdWV0b290aEFkYXB0ZXIoKSB7CiAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5vcGVuQmx1ZXRvb3RoQWRhcHRlciAmJiB3aW5kb3cuaGlsaW5rLm9wZW5CbHVldG9vdGhBZGFwdGVyKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbjog5Y675rOo5YaM6K6+5aSHIOesrOS6jOatpQ0KICAgICAqIEBwYXJhbSB7Kn0NCiAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAqLwogICAgZ2V0Q3VycmVudFJlZ2lzdGVyZWREZXZpY2U6IGZ1bmN0aW9uIGdldEN1cnJlbnRSZWdpc3RlcmVkRGV2aWNlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIOazqOWGjOWJjeWFiOebkeWQrOWPkeeOsOiuvuWkhwogICAgICB3aW5kb3cuZ2V0Q3VycmVudFJlZ2lzdGVyZWREZXZpY2VDYWxsQmFjayA9IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvL2NvbnNvbGUubG9nKCfms6jlhozliY3lhYjnm5HlkKzlj5HnjrDorr7lpIcnLCByZXMpOwogICAgICAgIHZhciBkYXRhOwoKICAgICAgICBpZiAod2luZG93LmlvcykgewogICAgICAgICAgZGF0YSA9IF90aGlzMi5nZXRJT1NEZXZpZChyZXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShyZXMpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLmRldmljZUlkID0gZGF0YS5kZXZpY2VJZDsKICAgICAgICB3aW5kb3cuZGV2SWQgPSBkYXRhLmRldmljZUlkOwogICAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5jcmVhdGVCTEVDb25uZWN0aW9uICYmIHdpbmRvdy5oaWxpbmsuY3JlYXRlQkxFQ29ubmVjdGlvbihfdGhpczIuZGV2aWNlSWQpOwogICAgICB9OwoKICAgICAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLmdldEN1cnJlbnRSZWdpc3RlcmVkRGV2aWNlICYmIHdpbmRvdy5oaWxpbmsuZ2V0Q3VycmVudFJlZ2lzdGVyZWREZXZpY2UoJ2dldEN1cnJlbnRSZWdpc3RlcmVkRGV2aWNlQ2FsbEJhY2snKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uOiDnm5HlkKzov57mjqXorr7lpIfnu5PmnpwNCiAgICAgKiBAcGFyYW0geyp9DQogICAgICogQHJldHVybiB7Kn0NCiAgICAgKi8KICAgIG9uQkxFQ29ubmVjdGlvblN0YXRlQ2hhbmdlOiBmdW5jdGlvbiBvbkJMRUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsub25CTEVDb25uZWN0aW9uU3RhdGVDaGFuZ2UgJiYgd2luZG93LmhpbGluay5vbkJMRUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSgnb25CTEVDb25uZWN0aW9uU3RhdGVDaGFuZ2VDYWxsQmFjaycpOwoKICAgICAgd2luZG93Lm9uQkxFQ29ubmVjdGlvblN0YXRlQ2hhbmdlQ2FsbEJhY2sgPSBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgcmVzID0gSlNPTi5wYXJzZShyZXMpOwoKICAgICAgICBpZiAocmVzLmNvbm5lY3RlZCkgewogICAgICAgICAgX3RoaXMzLmNhbGxfdXBkYXRlX2JsZUNvbm5lY3RlZCh0cnVlKTsgLy8g6YCa55+l5LiK5bGCCgoKICAgICAgICAgIF90aGlzMy5vbkJMRVNlcnZpY2VzRGlzY292ZXJlZCgpOyAvL+ebkeWQrOS9juWKn+iAl+iTneeJmeiuvuWkh+eahOeJueW+geWAvOWPmOWMlgoKCiAgICAgICAgICBfdGhpczMub25CTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOi/nuaOpeS4jeaIkOWKnyDph43mlrDov57mjqUKICAgICAgICAgIF90aGlzMy5zZWFyY2hEZXZpY2VzKCk7CgogICAgICAgICAgX3RoaXMzLmNhbGxfdXBkYXRlX2JsZUNvbm5lY3RlZChmYWxzZSk7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb246IOebkeWQrOiTneeJmeaYr+WQpuaJk+W8gA0KICAgICAqIEBwYXJhbSB7Kn0NCiAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAqLwogICAgb25CbHVldG9vdGhBZGFwdGVyU3RhdGVDaGFuZ2U6IGZ1bmN0aW9uIG9uQmx1ZXRvb3RoQWRhcHRlclN0YXRlQ2hhbmdlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5vbkJsdWV0b290aEFkYXB0ZXJTdGF0ZUNoYW5nZSAmJiB3aW5kb3cuaGlsaW5rLm9uQmx1ZXRvb3RoQWRhcHRlclN0YXRlQ2hhbmdlKCdvbkJsdWV0b290aEFkYXB0ZXJTdGF0ZUNoYW5nZUNhbGxCYWNrJyk7CgogICAgICB3aW5kb3cub25CbHVldG9vdGhBZGFwdGVyU3RhdGVDaGFuZ2VDYWxsQmFjayA9IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXMgPSBKU09OLnBhcnNlKHJlcyk7IC8vY29uc29sZS5sb2coJyA0LuebkeWQrOi/nuaOpeiuvuWkh+e7k+aenCcsIHJlcyk7CgogICAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5jcmVhdGVCTEVDb25uZWN0aW9uICYmIHdpbmRvdy5oaWxpbmsuY3JlYXRlQkxFQ29ubmVjdGlvbihfdGhpczQuZGV2aWNlSWQpOwoKICAgICAgICBpZiAocmVzLmF2YWlsYWJsZSkgewogICAgICAgICAgX3RoaXM0LmdldEN1cnJlbnRSZWdpc3RlcmVkRGV2aWNlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzNC5vcGVuQmx1ZXRvb3RoQWRhcHRlcigpOyAvLyDok53niZnmnKrmiZPlvIAKCgogICAgICAgICAgX3RoaXM0LnNlYXJjaERldmljZXMoKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbjogLy8g6YCa55+l5LiK5bGCDQogICAgICogQHBhcmFtIHsqfQ0KICAgICAqIEByZXR1cm4geyp9DQogICAgICovCiAgICBvbkJMRVNlcnZpY2VzRGlzY292ZXJlZDogZnVuY3Rpb24gb25CTEVTZXJ2aWNlc0Rpc2NvdmVyZWQoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIHN0YXR1czsKCiAgICAgIHdpbmRvdy5vbkJMRVNlcnZpY2VzRGlzY292ZXJlZENhbGxiYWNrID0gZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmICh3aW5kb3cuaW9zKSB7CiAgICAgICAgICBpZiAocmVzID09IDApIHsKICAgICAgICAgICAgc3RhdHVzID0gd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLm5vdGlmeUJMRUNoYXJhY3RlcmlzdGljVmFsdWVDaGFuZ2UgJiYgd2luZG93LmhpbGluay5ub3RpZnlCTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlKHRoYXQuZGV2aWNlSWQsIHRoYXQuc2VydmljZUlkLCB0aGF0LnJlYWRDaGFyYWN0ZXJpc3RpY0lkLCB0cnVlKTsKCiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDApIHsKICAgICAgICAgICAgICAvL+ebkeWQrOS9juWKn+iAl+iTneeJmeiuvuWkh+eahOeJueW+geWAvOWPmOWMlgogICAgICAgICAgICAgIHRoYXQub25CTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlKCk7CiAgICAgICAgICAgICAgdGhhdC53cml0ZURhdGEoJzU1Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHJlcyk7CgogICAgICAgICAgaWYgKGRhdGEuZXJyQ29kZSA9PT0gMCkgewogICAgICAgICAgICB3aW5kb3cudDMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgc3RhdHVzID0gd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLm5vdGlmeUJMRUNoYXJhY3RlcmlzdGljVmFsdWVDaGFuZ2UgJiYgd2luZG93LmhpbGluay5ub3RpZnlCTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlKHRoYXQuZGV2aWNlSWQsIHRoYXQuc2VydmljZUlkLCB0aGF0LnJlYWRDaGFyYWN0ZXJpc3RpY0lkLCB0cnVlKTsKCiAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IDApIHsKICAgICAgICAgICAgICB0aGF0Lm9uQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZSgpOwogICAgICAgICAgICAgIHRoYXQud3JpdGVEYXRhKCc1NScpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLm9uQkxFU2VydmljZXNEaXNjb3ZlcmVkICYmIHdpbmRvdy5oaWxpbmsub25CTEVTZXJ2aWNlc0Rpc2NvdmVyZWQoIm9uQkxFU2VydmljZXNEaXNjb3ZlcmVkQ2FsbGJhY2siKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uOiAvL+ebkeWQrOS9juWKn+iAl+iTneeJmeiuvuWkh+eahOeJueW+geWAvOWPmOWMlg0KICAgICAqIEBwYXJhbSB7Kn0NCiAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAqLwogICAgb25CTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlOiBmdW5jdGlvbiBvbkJMRUNoYXJhY3RlcmlzdGljVmFsdWVDaGFuZ2UoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgd2luZG93Lm9uQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZUNhbGxiYWNrID0gZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKHJlcyk7CiAgICAgICAgX3RoaXM1Lmhpc3RvcnlMb2cgKz0gcmVzdWx0LmRhdGE7CgogICAgICAgIF90aGlzNS5hY2NlcHRUeXBlNThEYXRhKF90aGlzNS5oaXN0b3J5TG9nKTsKCiAgICAgICAgX3RoaXM1LmFjY2VwdFR5cGU1NURhdGEoX3RoaXM1Lmhpc3RvcnlMb2cpOwogICAgICB9OwoKICAgICAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLm9uQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZSAmJiB3aW5kb3cuaGlsaW5rLm9uQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZSgib25CTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlQ2FsbGJhY2siKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uOiDmkJzntKLok53niZnorr7lpIcNCiAgICAgKiBAcGFyYW0geyp9DQogICAgICogQHJldHVybiB7Kn0NCiAgICAgKi8KICAgIHNlYXJjaERldmljZXM6IGZ1bmN0aW9uIHNlYXJjaERldmljZXMoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdmFyIF8gPSB0aGlzOwoKICAgICAgd2luZG93Lm9uQmx1ZXRvb3RoRGV2aWNlRm91bmRDYWxsYmFjayA9IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgZGF0YTsKCiAgICAgICAgaWYgKHdpbmRvdy5pb3MpIHsKICAgICAgICAgIGRhdGEgPSBfLmdldElPU0RldmlkKHJlcyk7CgogICAgICAgICAgaWYgKF90aGlzNi5kZXZpY2VJZCA9PSBkYXRhLmRldmljZUlkKSB7CiAgICAgICAgICAgIC8vIGlvcwogICAgICAgICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsuY3JlYXRlQkxFQ29ubmVjdGlvbiAmJiB3aW5kb3cuaGlsaW5rLmNyZWF0ZUJMRUNvbm5lY3Rpb24oZGF0YS5kZXZpY2VJZCk7CiAgICAgICAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5zdG9wQmx1ZXRvb3RoRGV2aWNlc0Rpc2NvdmVyeSAmJiB3aW5kb3cuaGlsaW5rLnN0b3BCbHVldG9vdGhEZXZpY2VzRGlzY292ZXJ5KCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChfdGhpczYuZGV2aWNlSWQgPT0gSlNPTi5wYXJzZShyZXMpWzBdLmRldmljZUlkKSB7CiAgICAgICAgICAgIC8vIOWuieWNkwogICAgICAgICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsuY3JlYXRlQkxFQ29ubmVjdGlvbiAmJiB3aW5kb3cuaGlsaW5rLmNyZWF0ZUJMRUNvbm5lY3Rpb24oX3RoaXM2LmRldmljZUlkKTsKICAgICAgICAgICAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLnN0b3BCbHVldG9vdGhEZXZpY2VzRGlzY292ZXJ5ICYmIHdpbmRvdy5oaWxpbmsuc3RvcEJsdWV0b290aERldmljZXNEaXNjb3ZlcnkoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsub25CbHVldG9vdGhEZXZpY2VGb3VuZCAmJiB3aW5kb3cuaGlsaW5rLm9uQmx1ZXRvb3RoRGV2aWNlRm91bmQoIm9uQmx1ZXRvb3RoRGV2aWNlRm91bmRDYWxsYmFjayIpOwoKICAgICAgaWYgKHdpbmRvdy5pb3MpIHsKICAgICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsuc3RhcnRCbHVldG9vdGhEZXZpY2VzRGlzY292ZXJ5ICYmIHdpbmRvdy5oaWxpbmsuc3RhcnRCbHVldG9vdGhEZXZpY2VzRGlzY292ZXJ5KFtdLCBmYWxzZSwgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLnN0YXJ0Qmx1ZXRvb3RoRGV2aWNlc0Rpc2NvdmVyeSAmJiB3aW5kb3cuaGlsaW5rLnN0YXJ0Qmx1ZXRvb3RoRGV2aWNlc0Rpc2NvdmVyeShbXSwgdHJ1ZSwgMSk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uOiDop6PmnpBpb3MgZGV2SUQNCiAgICAgKiBAcGFyYW0geyp9DQogICAgICogQHJldHVybiB7Kn0NCiAgICAgKi8KICAgIGdldElPU0RldmlkOiBmdW5jdGlvbiBnZXRJT1NEZXZpZChyZXMpIHsKICAgICAgdmFyIGRhdGEgPSB1bmRlZmluZWQ7CiAgICAgIHZhciBkYXRhU3RyID0gcmVzOwogICAgICBkYXRhU3RyID0gZGF0YVN0ci5yZXBsYWNlKC8iey9nLCAneycpOwogICAgICBkYXRhU3RyID0gZGF0YVN0ci5yZXBsYWNlKC99Ii9nLCAnfScpOwogICAgICBkYXRhU3RyID0gZGF0YVN0ci5yZXBsYWNlKC9cXHxcbnxccnxcdHxcZnxcdC9nLCAnJyk7CiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHIpOwogICAgICByZXR1cm4gZGF0YTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uOiAg6JOd54mZ6K6+5aSH5pON5o6n77ya5a+56JOd54mZ6K6+5aSH5Y+R6YCB5pWw5o2uDQogICAgICogQHBhcmFtIHsqfQ0KICAgICAqIEByZXR1cm4geyp9DQogICAgICovCiAgICB3cml0ZURhdGE6IGZ1bmN0aW9uIHdyaXRlRGF0YShkYXRhKSB7CiAgICAgIGlmIChkYXRhID09PSAnNTcnIHx8IGRhdGEgPT09ICc1OScpIHsKICAgICAgICB3aW5kb3cudHlwZTU4ID0gdHJ1ZTsKICAgICAgICB3aW5kb3cudHlwZTU1ID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93LnR5cGU1OCA9IGZhbHNlOwogICAgICAgIHdpbmRvdy50eXBlNTUgPSB0cnVlOwogICAgICB9IC8vLy9jb25zb2xlLmxvZygn6JOd54mZ6K6+5aSH5pON5o6n77ya5a+56JOd54mZ6K6+5aSH5Y+R6YCB5pWw5o2uJyk7CgoKICAgICAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLndyaXRlQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZSAmJiB3aW5kb3cuaGlsaW5rLndyaXRlQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZSh0aGlzLmRldmljZUlkLCB0aGlzLnNlcnZpY2VJZCwgdGhpcy53cml0ZUNoYXJhY3RlcmlzdGljSWQsIGRhdGEsICJ3cml0ZUJMRUNoYXJhY3RlcmlzdGljVmFsdWVDYWxsQmFjayIpOwoKICAgICAgd2luZG93LndyaXRlQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNhbGxCYWNrID0gZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciByZXNWYWwgPSBKU09OLnBhcnNlKHJlcyk7CiAgICAgIH07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbjog55uR5ZCs6K6+5aSH5piv5ZCm5byA5py6DQogICAgICogQHBhcmFtIHsqfSBkYXRhDQogICAgICogQHJldHVybiB7Kn0NCiAgICAgKi8KICAgIG9uTWFjaGluZU9wZW46IGZ1bmN0aW9uIG9uTWFjaGluZU9wZW4oZGF0YSkgewogICAgICBpZiAoc2NhbGUuaGV4dG9CaW4oZGF0YS5zdWJzdHIoNCwgMikpWzddID09PSAnMCcpIHsKICAgICAgICBnLm92ZXJXcml0ZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuVmlkZW9Qb3B1JykpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHNjYWxlLmhleHRvQmluKGRhdGEuc3Vic3RyKDQsIDIpKVs3XSA9PT0gJzEnKSB7CiAgICAgICAgZy5vdmVyV3JpdGUgPSBmYWxzZTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL2d1aWRlX2FkdWx0JwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbjogIOaOpeWPlyA1NSDorr7lpIfmlbDmja4NCiAgICAgKiBAcGFyYW0geyp9IGRhdGENCiAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAqLwogICAgYWNjZXB0VHlwZTU1RGF0YTogZnVuY3Rpb24gYWNjZXB0VHlwZTU1RGF0YShoaXN0b3J5TG9nKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgaWYgKHdpbmRvdy5pb3MpIHsKICAgICAgICBoaXN0b3J5TG9nID0gaGlzdG9yeUxvZy5zdWJzdHIoaGlzdG9yeUxvZy5pbmRleE9mKCc1NicpLCAxMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGlzdG9yeUxvZyA9IGhpc3RvcnlMb2cuc3Vic3RyKDAsIDEwKTsKICAgICAgfQoKICAgICAgaWYgKGhpc3RvcnlMb2cuaW5jbHVkZXMoJzU4JykgJiYgaGlzdG9yeUxvZy5pbmRleE9mKCc1OCcpID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHZhciBzdW0gPSAwOwoKICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBoaXN0b3J5TG9nLmxlbmd0aCAtIDI7IGkgKz0gMikgewogICAgICAgIHN1bSArPSBwYXJzZUludChoaXN0b3J5TG9nLnN1YnN0cihpLCAyKSwgMTYpOwogICAgICB9CgogICAgICB2YXIgdmVyaWZ5Qm9vbCA9IHN1bSA9PT0gcGFyc2VJbnQoaGlzdG9yeUxvZy5zdWJzdHIoaGlzdG9yeUxvZy5sZW5ndGggLSAyKSwgMTYpOwoKICAgICAgaWYgKGhpc3RvcnlMb2cuaW5jbHVkZXMoJzU2JykgJiYgaGlzdG9yeUxvZy5pbmRleE9mKCc1NicpID09PSAwICYmIHZlcmlmeUJvb2wpIHsKICAgICAgICB0aGlzLmNhbGxfdXBkYXRlX2JpbkRhdGEoaGlzdG9yeUxvZyk7CiAgICAgICAgdGhpcy5vbk1hY2hpbmVPcGVuKGhpc3RvcnlMb2cpOwogICAgICAgIHRoaXMuaGlzdG9yeUxvZyA9ICcnOwoKICAgICAgICBpZiAodGhpcy5pbml0R2V0RGF0YTU4KSB7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXM3LndyaXRlRGF0YSgnNTcnKTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgdGhpcy5pbml0R2V0RGF0YTU4ID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBkZXNjcmlwdGlvbjogIOaOpeWPlyA1OCDorr7lpIfmlbDmja4NCiAgICAgKiBAcGFyYW0geyp9IGRhdGENCiAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAqLwogICAgYWNjZXB0VHlwZTU4RGF0YTogZnVuY3Rpb24gYWNjZXB0VHlwZTU4RGF0YShoaXN0b3J5TG9nKSB7CiAgICAgIGlmIChoaXN0b3J5TG9nLmluY2x1ZGVzKCc1NicpICYmIGhpc3RvcnlMb2cuaW5kZXhPZignNTYnKSA9PT0gMCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICB2YXIgXyA9IHRoaXM7CgogICAgICB2YXIgZGF0YUxlbiA9IHBhcnNlSW50KGhpc3RvcnlMb2cuc3Vic3RyKDIsIDIpLCAxNik7CiAgICAgIHZhciBGSCA9IGhpc3RvcnlMb2cuaW5kZXhPZignNTgnKTsKCiAgICAgIGlmIChGSCA9PT0gMCAmJiBkYXRhTGVuID4gOTAgJiYgaGlzdG9yeUxvZy5sZW5ndGggPT09IDkzICogMikgewogICAgICAgIF8ud3JpdGVEYXRhKCc1OScpOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSAvLyDluKY1OOWSjOaVsOaNrumVv+W6pu+8jOS4jeW4puagoemqjOWSjOeahOWOhuWPsuaVsOaNrgoKCiAgICAgIHZhciB2ZXJpZnkgPSB0aGlzLnZlcmlmeTU4KGhpc3RvcnlMb2cpOwoKICAgICAgaWYgKHZlcmlmeSkgewogICAgICAgIF8uY2FsbF91cGRhdGVfbG9nRGF0YShoaXN0b3J5TG9nKTsKCiAgICAgICAgXy5oaXN0b3J5TG9nID0gJyc7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uOiAg5qCh6aqMIDU4IOiuvuWkh+aVsOaNrg0KICAgICAqIEBwYXJhbSB7Kn0gZGF0YQ0KICAgICAqIEByZXR1cm4geyp9DQogICAgICovCiAgICB2ZXJpZnk1ODogZnVuY3Rpb24gdmVyaWZ5NTgoaGlzdG9yeUxvZykgewogICAgICB2YXIgYnl0ZUxlbiA9IGhpc3RvcnlMb2cubGVuZ3RoIC8gMjsKICAgICAgdmFyIGFiID0gbmV3IEFycmF5QnVmZmVyKGJ5dGVMZW4pOwogICAgICB2YXIgZHYgPSBuZXcgRGF0YVZpZXcoYWIpOwogICAgICB2YXIgdmVyaWZ5MSA9IDAsCiAgICAgICAgICB2ZXJpZnkyID0gMCwKICAgICAgICAgIGJvb2wgPSBmYWxzZTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlTGVuOyBpKyspIHsKICAgICAgICAgIGR2LnNldFVpbnQ4KGksIHBhcnNlSW50KGhpc3RvcnlMb2cuc3Vic3RyKGkgKiAyLCAyKSwgMTYpKTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBieXRlTGVuOyBpbmRleCsrKSB7CiAgICAgICAgICBpZiAoYnl0ZUxlbiA9PT0gOTMpIHsKICAgICAgICAgICAgaW5kZXggPiAwICYmIGluZGV4IDwgYnl0ZUxlbiAtIDEgPyB2ZXJpZnkxICs9IGR2LmdldFVpbnQ4KGluZGV4KSA6ICcnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaW5kZXggPiAwICYmIGluZGV4IDwgOTIgPyB2ZXJpZnkxICs9IGR2LmdldFVpbnQ4KGluZGV4KSA6ICcnOwogICAgICAgICAgICBpbmRleCA+IDkzICYmIGluZGV4IDwgYnl0ZUxlbiAtIDEgPyB2ZXJpZnkyICs9IGR2LmdldFVpbnQ4KGluZGV4KSA6ICcnOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGJ5dGVMZW4gPT09IDkzKSB7CiAgICAgICAgICBib29sID0gdmVyaWZ5MSAlIDI1NiA9PT0gZHYuZ2V0VWludDgoYnl0ZUxlbiAtIDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBib29sID0gdmVyaWZ5MSAlIDI1NiA9PT0gZHYuZ2V0VWludDgoOTIpICYmIHZlcmlmeTIgJSAyNTYgPT09IGR2LmdldFVpbnQ4KGJ5dGVMZW4gLSAxKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coJycpOwogICAgICB9CgogICAgICByZXR1cm4gYm9vbDsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["E:/OMROM/aiweijie/aiweijie/src/mixins/bleConnect.js"],"names":["mapActions","g","scale","data","deviceId","serviceId","writeCharacteristicId","readCharacteristicId","bleConnected","historyLog","initGetData58","created","window","type55","type58","mounted","t0","Date","getTime","onBLEConnectionStateChange","onBluetoothAdapterStateChange","getBluetoothAdapterState","openBluetoothAdapter","computed","connected","$store","state","BleStatus","watch","n","o","methods","call_update_bleConnected","call_update_binData","call_update_logData","hilink","getBluetoothAdapterStateCallback","res","JSON","parse","available","getCurrentRegisteredDevice","searchDevices","console","log","getCurrentRegisteredDeviceCallBack","ios","getIOSDevid","devId","createBLEConnection","onBLEConnectionStateChangeCallBack","onBLEServicesDiscovered","onBLECharacteristicValueChange","onBluetoothAdapterStateChangeCallBack","that","status","onBLEServicesDiscoveredCallback","notifyBLECharacteristicValueChange","writeData","errCode","t3","onBLECharacteristicValueChangeCallback","result","acceptType58Data","acceptType55Data","_","onBluetoothDeviceFoundCallback","stopBluetoothDevicesDiscovery","onBluetoothDeviceFound","startBluetoothDevicesDiscovery","undefined","dataStr","replace","writeBLECharacteristicValue","writeBLECharacteristicValueCallBack","resVal","onMachineOpen","hextoBin","substr","overWrite","document","querySelector","$router","push","path","indexOf","includes","sum","i","length","parseInt","verifyBool","setTimeout","dataLen","FH","verify","verify58","byteLen","ab","ArrayBuffer","dv","DataView","verify1","verify2","bool","setUint8","index","getUint8","error"],"mappings":"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","sourcesContent":["/*\r\n * @Description: 蓝牙连接过程\r\n * @version: \r\n * @Author: HeZhen\r\n * @Date: 2020-12-11 11:02:24\r\n * @LastEditors: HeZhen\r\n * @LastEditTime: 2021-03-02 14:08:34\r\n */\r\n\r\nimport { mapActions } from 'vuex'\r\nimport g from '../Util/global';\r\nimport { scale } from '../Util/tool'\r\nexport default {\r\n    data() {\r\n        return {\r\n            // serviceId: \"6e400001-b5a3-f393-e0a9-e50e24dcca9e\",\r\n            // readCharacteristicId: \"6e400003-b5a3-f393-e0a9-e50e24dcca9e\",\r\n            // writeCharacteristicId: \"6e400002-b5a3-f393-e0a9-e50e24dcca9e\",\r\n\r\n            deviceId: null,\r\n            serviceId: \"0000ffb0-0000-1000-8000-00805f9b34fb\",\r\n            writeCharacteristicId: \"0000ffb1-0000-1000-8000-00805f9b34fb\",\r\n            readCharacteristicId: \"0000ffb2-0000-1000-8000-00805f9b34fb\",\r\n            bleConnected: '',\r\n            historyLog: '',\r\n            initGetData58: true,\r\n        }\r\n    },\r\n    created() {\r\n        // 数据表示 55 58\r\n        window.type55 = false;\r\n        window.type58 = true;\r\n    },\r\n    mounted() {\r\n        window.t0 = new Date().getTime()\r\n        //console.log('進入頁面', 0);\r\n        this.onBLEConnectionStateChange();\r\n       // window.hilink && window.hilink.setTitleVisible && window.hilink.setTitleVisible(false);\r\n        this.onBluetoothAdapterStateChange();\r\n        this.getBluetoothAdapterState();\r\n        this.openBluetoothAdapter()\r\n    },\r\n    computed: {\r\n        connected() {  //已连接\r\n            return this.$store.state.BleStatus.bleConnected\r\n        }\r\n    },\r\n    watch: {\r\n        connected(n, o) { //已连接\r\n            if (n) {\r\n                //this.writeData('55')\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions({\r\n            call_update_bleConnected: 'BleStatus/call_update_bleConnected',\r\n            call_update_binData: 'BleStatus/call_update_binData',\r\n            call_update_logData: 'BleStatus/call_update_logData'\r\n        }),\r\n\r\n        /**\r\n         * @description: 蓝牙连接第一步 获取设备蓝牙模块状态\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        getBluetoothAdapterState() {\r\n            window.hilink && window.hilink.getBluetoothAdapterState && window.hilink.getBluetoothAdapterState(\r\n                \"getBluetoothAdapterStateCallback\"\r\n            );\r\n            window.getBluetoothAdapterStateCallback = (res) => {\r\n                let data = JSON.parse(res);\r\n                if (data.available) {\r\n                    this.getCurrentRegisteredDevice();\r\n                    this.searchDevices()\r\n                } else {\r\n                    console.log('');\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @description: 打开蓝牙\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        openBluetoothAdapter() {\r\n            window.hilink && window.hilink.openBluetoothAdapter && window.hilink.openBluetoothAdapter();\r\n        },\r\n\r\n        /**\r\n         * @description: 去注册设备 第二步\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        getCurrentRegisteredDevice() {\r\n            // 注册前先监听发现设备\r\n            window.getCurrentRegisteredDeviceCallBack = res => {\r\n                //console.log('注册前先监听发现设备', res);\r\n                let data;\r\n                if (window.ios) {\r\n                    data = this.getIOSDevid(res)\r\n                } else {\r\n                    data = JSON.parse(res)\r\n                }\r\n                this.deviceId = data.deviceId;\r\n                window.devId = data.deviceId;\r\n                window.hilink && window.hilink.createBLEConnection && window.hilink.createBLEConnection(this.deviceId)\r\n            }\r\n            window.hilink && window.hilink.getCurrentRegisteredDevice && window.hilink.getCurrentRegisteredDevice('getCurrentRegisteredDeviceCallBack')\r\n        },\r\n\r\n        /**\r\n         * @description: 监听连接设备结果\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        onBLEConnectionStateChange() {\r\n            window.hilink && window.hilink.onBLEConnectionStateChange && window.hilink.onBLEConnectionStateChange('onBLEConnectionStateChangeCallBack')\r\n            window.onBLEConnectionStateChangeCallBack = res => {\r\n                res = JSON.parse(res)\r\n                if (res.connected) {\r\n                    this.call_update_bleConnected(true)\r\n                    // 通知上层\r\n                    this.onBLEServicesDiscovered()\r\n                    //监听低功耗蓝牙设备的特征值变化\r\n                    this.onBLECharacteristicValueChange()\r\n\r\n                } else {\r\n                    // 连接不成功 重新连接\r\n                    this.searchDevices()\r\n                    this.call_update_bleConnected(false)\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @description: 监听蓝牙是否打开\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        onBluetoothAdapterStateChange() {\r\n            window.hilink && window.hilink.onBluetoothAdapterStateChange && window.hilink.onBluetoothAdapterStateChange('onBluetoothAdapterStateChangeCallBack')\r\n            window.onBluetoothAdapterStateChangeCallBack = res => {\r\n                res = JSON.parse(res);\r\n                //console.log(' 4.监听连接设备结果', res);\r\n                window.hilink && window.hilink.createBLEConnection && window.hilink.createBLEConnection(this.deviceId)\r\n                if (res.available) {\r\n                    this.getCurrentRegisteredDevice()\r\n                } else {\r\n                    this.openBluetoothAdapter()\r\n                    // 蓝牙未打开\r\n                    this.searchDevices()\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @description: // 通知上层\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        onBLEServicesDiscovered() {\r\n            let that = this;\r\n            let status;\r\n            window.onBLEServicesDiscoveredCallback = res => {\r\n                if (window.ios) {\r\n                    if (res == 0) {\r\n                        status = window.hilink && window.hilink.notifyBLECharacteristicValueChange && window.hilink.notifyBLECharacteristicValueChange(\r\n                            that.deviceId,\r\n                            that.serviceId,\r\n                            that.readCharacteristicId,\r\n                            true\r\n                        );\r\n                        if (status === 0) {\r\n                            //监听低功耗蓝牙设备的特征值变化\r\n                            that.onBLECharacteristicValueChange();\r\n                            that.writeData('55');\r\n                        }\r\n                    }\r\n                } else {\r\n                    let data = JSON.parse(res);\r\n                    if (data.errCode === 0) {\r\n                        window.t3 = new Date().getTime()\r\n                        status = window.hilink && window.hilink.notifyBLECharacteristicValueChange && window.hilink.notifyBLECharacteristicValueChange(\r\n                            that.deviceId,\r\n                            that.serviceId,\r\n                            that.readCharacteristicId,\r\n                            true\r\n                        );\r\n                        if (status === 0) {\r\n                            that.onBLECharacteristicValueChange();\r\n                            that.writeData('55');\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            window.hilink && window.hilink.onBLEServicesDiscovered && window.hilink.onBLEServicesDiscovered(\"onBLEServicesDiscoveredCallback\")\r\n        },\r\n\r\n        /**\r\n         * @description: //监听低功耗蓝牙设备的特征值变化\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        onBLECharacteristicValueChange() {\r\n            window.onBLECharacteristicValueChangeCallback = res => {\r\n                let result = JSON.parse(res);\r\n                this.historyLog += result.data;\r\n                this.acceptType58Data(this.historyLog)\r\n                this.acceptType55Data(this.historyLog)\r\n            }\r\n            window.hilink && window.hilink.onBLECharacteristicValueChange && window.hilink.onBLECharacteristicValueChange(\"onBLECharacteristicValueChangeCallback\");\r\n        },\r\n\r\n        /**\r\n         * @description: 搜索蓝牙设备\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        searchDevices() {\r\n            let _ = this;\r\n            window.onBluetoothDeviceFoundCallback = (res) => {\r\n                let data;\r\n                if (window.ios) {\r\n                    data = _.getIOSDevid(res);\r\n                    if (this.deviceId == data.deviceId) {  // ios\r\n                        window.hilink && window.hilink.createBLEConnection && window.hilink.createBLEConnection(data.deviceId)\r\n                        window.hilink && window.hilink.stopBluetoothDevicesDiscovery && window.hilink.stopBluetoothDevicesDiscovery()\r\n                    }\r\n                } else {\r\n                    if (this.deviceId == JSON.parse(res)[0].deviceId) {  // 安卓\r\n                        window.hilink && window.hilink.createBLEConnection && window.hilink.createBLEConnection(this.deviceId)\r\n                        window.hilink && window.hilink.stopBluetoothDevicesDiscovery && window.hilink.stopBluetoothDevicesDiscovery()\r\n                    }\r\n                }\r\n            }\r\n            window.hilink && window.hilink.onBluetoothDeviceFound && window.hilink.onBluetoothDeviceFound(\"onBluetoothDeviceFoundCallback\")\r\n            if (window.ios) {\r\n                window.hilink && window.hilink.startBluetoothDevicesDiscovery && window.hilink.startBluetoothDevicesDiscovery([], false, 1)\r\n            } else {\r\n                window.hilink && window.hilink.startBluetoothDevicesDiscovery && window.hilink.startBluetoothDevicesDiscovery([], true, 1)\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @description: 解析ios devID\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        getIOSDevid(res) {\r\n            let data = undefined;\r\n            let dataStr = res;\r\n            dataStr = dataStr.replace(/\"{/g, '{');\r\n            dataStr = dataStr.replace(/}\"/g, '}');\r\n            dataStr = dataStr.replace(/\\\\|\\n|\\r|\\t|\\f|\\t/g, '');\r\n            data = JSON.parse(dataStr);\r\n            return data;\r\n        },\r\n\r\n        /**\r\n         * @description:  蓝牙设备操控：对蓝牙设备发送数据\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        writeData(data) {\r\n            if (data === '57' || data === '59') {\r\n                window.type58 = true;\r\n                window.type55 = false;\r\n            } else {\r\n                window.type58 = false;\r\n                window.type55 = true;\r\n            }\r\n            ////console.log('蓝牙设备操控：对蓝牙设备发送数据');\r\n            window.hilink && window.hilink.writeBLECharacteristicValue && window.hilink.writeBLECharacteristicValue(\r\n                this.deviceId,\r\n                this.serviceId,\r\n                this.writeCharacteristicId,\r\n                data,\r\n                \"writeBLECharacteristicValueCallBack\"\r\n            );\r\n            window.writeBLECharacteristicValueCallBack = (res) => {\r\n                let resVal = JSON.parse(res);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * @description: 监听设备是否开机\r\n         * @param {*} data\r\n         * @return {*}\r\n         */\r\n        onMachineOpen(data) {\r\n            if (scale.hextoBin(data.substr(4, 2))[7] === '0') {\r\n                g.overWrite = true;\r\n            }\r\n            if (document.querySelector('.VideoPopu')) {\r\n                return true;\r\n            }\r\n            if (scale.hextoBin(data.substr(4, 2))[7] === '1') {\r\n                g.overWrite = false;\r\n                this.$router.push({ path: '/guide_adult' })\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @description:  接受 55 设备数据\r\n         * @param {*} data\r\n         * @return {*}\r\n         */\r\n        acceptType55Data(historyLog) {\r\n            if(window.ios){\r\n                historyLog = historyLog.substr(historyLog.indexOf('56'), 10);\r\n            }else{\r\n                historyLog = historyLog.substr(0, 10);\r\n            }\r\n            \r\n            if (historyLog.includes('58') && historyLog.indexOf('58') === 0) {\r\n                return true;\r\n            }\r\n            let sum = 0;\r\n            for (let i = 2; i < historyLog.length - 2; i += 2) {\r\n                sum += parseInt(historyLog.substr(i, 2), 16)\r\n            }\r\n            let verifyBool = sum === parseInt(historyLog.substr(historyLog.length - 2), 16);\r\n            if (historyLog.includes('56') && historyLog.indexOf('56') === 0 && verifyBool) {\r\n                this.call_update_binData(historyLog);\r\n                this.onMachineOpen(historyLog)\r\n                this.historyLog = '';\r\n                if (this.initGetData58) {\r\n                   setTimeout(() => {\r\n                        this.writeData('57')\r\n                    }, 1000);\r\n                    this.initGetData58 = false;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @description:  接受 58 设备数据\r\n         * @param {*} data\r\n         * @return {*}\r\n         */\r\n        acceptType58Data(historyLog) {\r\n            if (historyLog.includes('56') && historyLog.indexOf('56') === 0) {\r\n                return true;\r\n            }\r\n            let _ = this;\r\n            let dataLen = parseInt(historyLog.substr(2, 2), 16);\r\n            let FH = historyLog.indexOf('58');\r\n            if (FH === 0 && dataLen > 90 && historyLog.length === 93 * 2) {\r\n                _.writeData('59');\r\n                return true;\r\n            }\r\n            // 带58和数据长度，不带校验和的历史数据\r\n            let verify = this.verify58(historyLog);\r\n            if (verify) {\r\n                _.call_update_logData(historyLog);\r\n                _.historyLog = '';\r\n                return true;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * @description:  校验 58 设备数据\r\n         * @param {*} data\r\n         * @return {*}\r\n         */\r\n        verify58(historyLog) {\r\n            let byteLen = historyLog.length / 2;\r\n            let ab = new ArrayBuffer(byteLen)\r\n            let dv = new DataView(ab)\r\n            let verify1 = 0, verify2 = 0, bool = false;\r\n            try {\r\n                for (let i = 0; i < byteLen; i++) {\r\n                    dv.setUint8(i, parseInt(historyLog.substr(i * 2, 2), 16))\r\n                }\r\n                for (let index = 0; index < byteLen; index++) {\r\n                    if (byteLen === 93) {\r\n                        (index > 0 && index < byteLen - 1) ? verify1 += dv.getUint8(index) : '';\r\n                    } else {\r\n                        (index > 0 && index < 92) ? verify1 += dv.getUint8(index) : '';\r\n                        (index > 93 && index < byteLen - 1) ? verify2 += dv.getUint8(index) : '';\r\n                    }\r\n                }\r\n                if (byteLen === 93) {\r\n                    bool = verify1 % 256 === dv.getUint8(byteLen - 1);\r\n                } else {\r\n                    bool = verify1 % 256 === dv.getUint8(92) && verify2 % 256 === dv.getUint8(byteLen - 1)\r\n                }\r\n            } catch (error) {\r\n                console.log('');\r\n            }\r\n            return bool\r\n        },\r\n    },\r\n}\r\n"]}]}