{"remainingRequest":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\babel-loader\\lib\\index.js!E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\OMROM\\aiweijie\\aiweijie\\src\\Util\\reportData.js","dependencies":[{"path":"E:\\OMROM\\aiweijie\\aiweijie\\src\\Util\\reportData.js","mtime":1616635982886},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\OMROM\\aiweijie\\aiweijie\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKCi8qDQogKiBARGVzY3JpcHRpb246IOS4iuaKpeaVsOaNrg0KICogQHZlcnNpb246IA0KICogQEF1dGhvcjogSGVaaGVuDQogKiBARGF0ZTogMjAyMC0xMi0yNCAxNTo1NDo1NA0KICogQExhc3RFZGl0b3JzOiBIZVpoZW4NCiAqIEBMYXN0RWRpdFRpbWU6IDIwMjEtMDMtMDIgMTA6NTY6MDUNCiAqICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBzdGF0dXM6ICJvbmxpbmUiLA0KICAgICAgICAgICAgICAgIHNlcnZpY2VzOiBbDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRzOiAiMjAyMDEyMjJUMTEyMDAzWiIsDQogICAgICAgICAgICAgICAgICAgICAgICBzaWQ6ICJicnVzaGluZ0hpc3RvcnkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbkNvZGU6ICIwMDEwMTEwMSIsDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB0czogIjIwMjAxMjIzVDExMjAwM1oiLA0KICAgICAgICAgICAgICAgICAgICAgICAgc2lkOiAiYnJ1c2hpbmdIaXN0b3J5IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5Db2RlOiAiMDAxMDExMTEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdHM6ICIyMDIwMTIyM1QxMTIwMDNaIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHNpZDogImJydXNoaW5nSGlzdG9yeSIsDQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluQ29kZTogIlNTU1NTU1NTIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIH07DQogKi8KaW1wb3J0IHsgc2NhbGUgfSBmcm9tICcuLi9VdGlsL3Rvb2wnOyAvLyDmk43kvZzkupHnq6/ljoblj7LmlbDmja7lr7nosaEKCnZhciByZXBvcnREYXRhID0ge307IC8vIOS6keerr+WUr+S4gCBpZAoKcmVwb3J0RGF0YS5kZXZJZCA9ICcnOyAvLyDojrflj5bljY7kuLrkupHnq6/llK/kuIBpZAoKcmVwb3J0RGF0YS5nZXREZXZJZCA9IGZ1bmN0aW9uICgpIHsKICAvLyDojrflj5borr7lpIfkv6Hmga8KICB3aW5kb3cuZ2V0RGV2SW5mb0FsbENhbGxiYWNrID0gZnVuY3Rpb24gKHJlcykgewogICAgcmVzID0gSlNPTi5wYXJzZShyZXMpOwogICAgY29uc29sZS5sb2coJ+iOt+WPluWNjuS4uuS6keerr+WUr+S4gGlkJywgcmVzKTsKICAgIHJlcG9ydERhdGEuZGV2SWQgPSByZXMuZGV2SWQ7CiAgfTsKCiAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLmdldERldkluZm9BbGwgJiYgd2luZG93LmhpbGluay5nZXREZXZJbmZvQWxsKCIwIiwgIiIsICJnZXREZXZJbmZvQWxsQ2FsbGJhY2siKTsKfTsgLy8g5qC85byP5YyW5pWw5o2uCgoKcmVwb3J0RGF0YS5mb3JtYXREYXRhRnJvbU1hY2hpbmUgPSBmdW5jdGlvbiAoc3RyKSB7CiAgdmFyIGJ5dGVMZW4gPSBwYXJzZUludChzdHIuc3Vic3RyKDIsIDIpLCAxNik7CiAgdmFyIGFiID0gbmV3IEFycmF5QnVmZmVyKGJ5dGVMZW4pOwogIHZhciBkdiA9IG5ldyBEYXRhVmlldyhhYik7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZUxlbjsgaSsrKSB7CiAgICBpIDwgOTAgPyBkdi5zZXRVaW50OChpLCBwYXJzZUludChzdHIuc3Vic3RyKGkgKiAyICsgNCwgMiksIDE2KSkgOiBkdi5zZXRVaW50OChpLCBwYXJzZUludChzdHIuc3Vic3RyKGkgKiAyICsgMTAsIDIpLCAxNikpOwogIH0KCiAgdmFyIHNlcnZpY2VzID0gW10sCiAgICAgIGl0ZW0gPSB7fSwKICAgICAgcmVwb3J0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gMTAwMCAqIGJ5dGVMZW47CgogIGZvciAodmFyIF9pID0gMDsgX2kgPCBieXRlTGVuOyBfaSsrKSB7CiAgICBpdGVtLnRzID0gcmVwb3J0RGF0YS5mb3JtYXRUaW1lKHJlcG9ydFRpbWUpOwogICAgaXRlbS5zaWQgPSAnYnJ1c2hpbmdIaXN0b3J5JzsKICAgIGl0ZW0uZGF0YSA9IHsKICAgICAgYmluQ29kZTogc2NhbGUuaGV4dG9CaW4oZHYuZ2V0VWludDgoX2kpLnRvU3RyaW5nKDE2KSkKICAgIH07CiAgICBzZXJ2aWNlcy5wdXNoKGl0ZW0pOwogICAgaXRlbSA9IHt9OwogICAgcmVwb3J0VGltZSArPSAxMDAwOwogIH0KCiAgdmFyIHJlcyA9IHsKICAgIHN0YXR1czogIm9ubGluZSIsCiAgICBzZXJ2aWNlczogW10uY29uY2F0KHNlcnZpY2VzKQogIH07CiAgcmV0dXJuIHJlczsKfTsgLy8g5qC85byP5YyW5LiK5oql5pe26Ze0CgoKcmVwb3J0RGF0YS5mb3JtYXRUaW1lID0gZnVuY3Rpb24gKCkgewogIHZhciB0aW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBudWxsOwogIC8vIHRpbWUg6KaB5rGC5pe26Ze05q+r56eS5pWwCiAgdGltZSA9IHRpbWUgPyB0aW1lIDogbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTsKICB2YXIgZm9ybWF0VGltZSA9ICcnOwogIHZhciBNID0gZGF0ZS5nZXRNb250aCgpICsgMTsKICBNID0gTS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICIwIi5jb25jYXQoTSkgOiAiIi5jb25jYXQoTSk7CiAgdmFyIEQgPSBkYXRlLmdldERhdGUoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICcwJyArIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkgOiBkYXRlLmdldERhdGUoKS50b1N0cmluZygpOwogIHZhciBIID0gZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkubGVuZ3RoID09PSAxID8gJzAnICsgZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkgOiBkYXRlLmdldEhvdXJzKCkudG9TdHJpbmcoKTsKICB2YXIgbSA9IGRhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkubGVuZ3RoID09PSAxID8gJzAnICsgZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKSA6IGRhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCk7CiAgdmFyIFMgPSBkYXRlLmdldFNlY29uZHMoKS50b1N0cmluZygpLmxlbmd0aCA9PT0gMSA/ICcwJyArIGRhdGUuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkgOiBkYXRlLmdldFNlY29uZHMoKS50b1N0cmluZygpOwogIGZvcm1hdFRpbWUgKz0gIiIuY29uY2F0KGRhdGUuZ2V0RnVsbFllYXIoKSkuY29uY2F0KE0pLmNvbmNhdChELCAiVCIpLmNvbmNhdChIKS5jb25jYXQobSkuY29uY2F0KFMsICJaIik7CiAgcmV0dXJuIGZvcm1hdFRpbWU7Cn07IC8vIOS4iuaKpeaVsOaNruWIsOWNjuS4uuS6keerrwoKCnJlcG9ydERhdGEucmVwb3J0ID0gZnVuY3Rpb24gKG9ubHlJZCkgewogIHZhciBEYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsOwogIHZhciBmdW5jID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsOwogIHZhciBqc29uX2JvZHkgPSBKU09OLnN0cmluZ2lmeShEYXRhKTsKCiAgd2luZG93LnJlcG9ydERldmljZVByb2ZpbGVJbXBlcm1hbmVuY3lDYWxsYmFjayA9IGZ1bmN0aW9uIChyZXMpIHsKICAgIGlmICh3aW5kb3cuaW9zKSB7CiAgICAgIHZhciBkYXRhID0gZ2V0SU9TRGV2aWQocmVzKTsKCiAgICAgIGlmIChkYXRhLmVyckNvZGUgPT0gMCkgewogICAgICAgIHZhciByZXNEYXRhID0gewogICAgICAgICAgZXJyY29kZTogMjAwCiAgICAgICAgfTsKCiAgICAgICAgaWYgKGZ1bmMpIHsKICAgICAgICAgIGZ1bmMocmVzRGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXMgPSBKU09OLnBhcnNlKHJlcyk7CgogICAgICBpZiAoZnVuYykgewogICAgICAgIGZ1bmMocmVzKTsKICAgICAgfQogICAgfQogIH07CgogIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5yZXBvcnREZXZpY2VQcm9maWxlSW1wZXJtYW5lbmN5ICYmIHdpbmRvdy5oaWxpbmsucmVwb3J0RGV2aWNlUHJvZmlsZUltcGVybWFuZW5jeShvbmx5SWQsIGpzb25fYm9keSwgInJlcG9ydERldmljZVByb2ZpbGVJbXBlcm1hbmVuY3lDYWxsYmFjayIpOwp9OwovKioNCiAqIEBkZXNjcmlwdGlvbjog6Kej5p6QaW9zIGRldklEDQogKiBAcGFyYW0geyp9DQogKiBAcmV0dXJuIHsqfQ0KICovCgoKZnVuY3Rpb24gZ2V0SU9TRGV2aWQocmVzKSB7CiAgdmFyIGRhdGEgPSB1bmRlZmluZWQ7CiAgdmFyIGRhdGFTdHIgPSByZXM7CiAgZGF0YVN0ciA9IGRhdGFTdHIucmVwbGFjZSgvInsvZywgJ3snKTsKICBkYXRhU3RyID0gZGF0YVN0ci5yZXBsYWNlKC99Ii9nLCAnfScpOwogIGRhdGFTdHIgPSBkYXRhU3RyLnJlcGxhY2UoL1xcfFxufFxyfFx0fFxmfFx0L2csICcnKTsKICBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyKTsKICByZXR1cm4gZGF0YTsKfSAvLyDojrflj5bljoblj7LorrDlvZUKCgpyZXBvcnREYXRhLmdldEhpc3RvcnlMb2cgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIGZ1bmMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7CiAgLy/ojrflj5bljoblj7LorrDlvZXlm57osIMKICB2YXIgZGF0YSA9IG51bGw7CiAgdmFyIG5vd0RhdGUgPSBuZXcgRGF0ZSgpOwogIHZhciBlbmRUaW1lID0gcmVwb3J0RGF0YS5mb3JtYXRUaW1lKCk7CiAgdmFyIHN0YXJ0VGltZSA9IHJlcG9ydERhdGEuZm9ybWF0VGltZShub3dEYXRlLnNldE1vbnRoKG5vd0RhdGUuZ2V0TW9udGgoKSAtIDcpKTsKCiAgd2luZG93LmdldERldkhpc3RvcnlDYWxsQmFjayA9IGZ1bmN0aW9uIChyZXMpIHsKICAgIHJlcyA9IEpTT04ucGFyc2UocmVzKTsKICAgIGRhdGEgPSByZXBvcnREYXRhLmZpbHRlckRhdGEocmVzLmxpc3QpOwoKICAgIGlmIChmdW5jKSB7CiAgICAgIGZ1bmMoZGF0YSk7CiAgICB9CiAgfTsKCiAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLmdldERldkhpc3RvcnkgJiYgd2luZG93LmhpbGluay5nZXREZXZIaXN0b3J5KHJlcG9ydERhdGEuZGV2SWQsIC8vIOWNjuS4uuWIhumFjeeahGlkICAKICAiMCIsICIxMDAwIiwgc3RhcnRUaW1lLCBlbmRUaW1lLCAiYnJ1c2hpbmdIaXN0b3J5IiwgImJpbkNvZGUiLCAiZ2V0RGV2SGlzdG9yeUNhbGxCYWNrIik7Cn07IC8vIOiOt+WPluWOhuWPsuiusOW9lQoKCnJlcG9ydERhdGEuZmlsdGVyRGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7CiAgLy/ojrflj5bljoblj7LorrDlvZXlm57osIMKICB2YXIgZm9ybWF0RGF0YSA9IFtdOwoKICB0cnkgewogICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICBpZiAoaXRlbS5kYXRhLmJpbkNvZGUgPT09ICdTU1NTU1NTUycpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0b3AnKTsKICAgICAgfQoKICAgICAgZm9ybWF0RGF0YS5wdXNoKGl0ZW0uZGF0YS5iaW5Db2RlKTsKICAgIH0pOwogIH0gY2F0Y2ggKGUpIHsKICAgIGNvbnNvbGUubG9nKCcnKTsKICB9CgogIHJldHVybiBmb3JtYXREYXRhOwp9OyAvLyDnibnmrormlbDmja4g55So5LqO5YiG5Ymy6YeN572u5ZCO55qE5Yi354mZ5Y6G5Y+y5pWw5o2uCgoKcmVwb3J0RGF0YS5yZXNpemUgPSBmdW5jdGlvbiAodGltZSkgewogIHZhciBzcGVjaWFsRGF0YSA9IHsKICAgIHN0YXR1czogIm9ubGluZSIsCiAgICBzZXJ2aWNlczogW3sKICAgICAgdHM6IHJlcG9ydERhdGEuZm9ybWF0VGltZSh0aW1lKSwKICAgICAgc2lkOiAiYnJ1c2hpbmdIaXN0b3J5IiwKICAgICAgZGF0YTogewogICAgICAgIGJpbkNvZGU6ICJTU1NTU1NTUyIKICAgICAgfQogICAgfV0KICB9OwogIHJlcG9ydERhdGEucmVwb3J0KHJlcG9ydERhdGEuZGV2SWQsIHNwZWNpYWxEYXRhKTsKfTsKCnJlcG9ydERhdGEuZ2V0RGV2SWQoKTsKZXhwb3J0IGRlZmF1bHQgcmVwb3J0RGF0YTs="},{"version":3,"sources":["E:/OMROM/aiweijie/aiweijie/src/Util/reportData.js"],"names":["scale","reportData","devId","getDevId","window","getDevInfoAllCallback","res","JSON","parse","console","log","hilink","getDevInfoAll","formatDataFromMachine","str","byteLen","parseInt","substr","ab","ArrayBuffer","dv","DataView","i","setUint8","services","item","reportTime","Date","getTime","ts","formatTime","sid","data","binCode","hextoBin","getUint8","toString","push","status","time","date","M","getMonth","length","D","getDate","H","getHours","m","getMinutes","S","getSeconds","getFullYear","report","onlyId","Data","func","json_body","stringify","reportDeviceProfileImpermanencyCallback","ios","getIOSDevid","errCode","resData","errcode","reportDeviceProfileImpermanency","undefined","dataStr","replace","getHistoryLog","nowDate","endTime","startTime","setMonth","getDevHistoryCallBack","filterData","list","getDevHistory","formatData","forEach","index","Error","e","resize","specialData"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,KAAT,QAAsB,cAAtB,C,CAEA;;AACA,IAAMC,UAAU,GAAG,EAAnB,C,CAEA;;AACAA,UAAU,CAACC,KAAX,GAAmB,EAAnB,C,CAEA;;AACAD,UAAU,CAACE,QAAX,GAAsB,YAAM;AACxB;AACAC,EAAAA,MAAM,CAACC,qBAAP,GAA+B,UAACC,GAAD,EAAS;AACpCA,IAAAA,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAN;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBJ,GAAzB;AACAL,IAAAA,UAAU,CAACC,KAAX,GAAmBI,GAAG,CAACJ,KAAvB;AACH,GAJD;;AAKAE,EAAAA,MAAM,CAACO,MAAP,IAAiBP,MAAM,CAACO,MAAP,CAAcC,aAA/B,IAAgDR,MAAM,CAACO,MAAP,CAAcC,aAAd,CAA4B,GAA5B,EAAiC,EAAjC,EAAqC,uBAArC,CAAhD;AACH,CARD,C,CAUA;;;AACAX,UAAU,CAACY,qBAAX,GAAmC,UAACC,GAAD,EAAS;AACxC,MAAIC,OAAO,GAAGC,QAAQ,CAACF,GAAG,CAACG,MAAJ,CAAW,CAAX,EAAc,CAAd,CAAD,EAAmB,EAAnB,CAAtB;AACA,MAAIC,EAAE,GAAG,IAAIC,WAAJ,CAAgBJ,OAAhB,CAAT;AACA,MAAIK,EAAE,GAAG,IAAIC,QAAJ,CAAaH,EAAb,CAAT;;AACA,OAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,OAApB,EAA6BO,CAAC,EAA9B,EAAkC;AAC9BA,IAAAA,CAAC,GAAG,EAAJ,GAASF,EAAE,CAACG,QAAH,CAAYD,CAAZ,EAAeN,QAAQ,CAACF,GAAG,CAACG,MAAJ,CAAWK,CAAC,GAAG,CAAJ,GAAQ,CAAnB,EAAsB,CAAtB,CAAD,EAA2B,EAA3B,CAAvB,CAAT,GAAkEF,EAAE,CAACG,QAAH,CAAYD,CAAZ,EAAeN,QAAQ,CAACF,GAAG,CAACG,MAAJ,CAAWK,CAAC,GAAG,CAAJ,GAAQ,EAAnB,EAAuB,CAAvB,CAAD,EAA4B,EAA5B,CAAvB,CAAlE;AACH;;AACD,MAAIE,QAAQ,GAAG,EAAf;AAAA,MAAmBC,IAAI,GAAG,EAA1B;AAAA,MAA8BC,UAAU,GAAG,IAAIC,IAAJ,GAAWC,OAAX,KAAwB,OAAOb,OAA1E;;AACA,OAAK,IAAIO,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGP,OAApB,EAA6BO,EAAC,EAA9B,EAAkC;AAC9BG,IAAAA,IAAI,CAACI,EAAL,GAAU5B,UAAU,CAAC6B,UAAX,CAAsBJ,UAAtB,CAAV;AACAD,IAAAA,IAAI,CAACM,GAAL,GAAW,iBAAX;AACAN,IAAAA,IAAI,CAACO,IAAL,GAAY;AACRC,MAAAA,OAAO,EAAEjC,KAAK,CAACkC,QAAN,CAAed,EAAE,CAACe,QAAH,CAAYb,EAAZ,EAAec,QAAf,CAAwB,EAAxB,CAAf;AADD,KAAZ;AAGAZ,IAAAA,QAAQ,CAACa,IAAT,CAAcZ,IAAd;AACAA,IAAAA,IAAI,GAAG,EAAP;AACAC,IAAAA,UAAU,IAAK,IAAf;AACH;;AACD,MAAIpB,GAAG,GAAG;AACNgC,IAAAA,MAAM,EAAE,QADF;AAENd,IAAAA,QAAQ,YAAMA,QAAN;AAFF,GAAV;AAIA,SAAOlB,GAAP;AACH,CAvBD,C,CAyBA;;;AACAL,UAAU,CAAC6B,UAAX,GAAwB,YAAiB;AAAA,MAAhBS,IAAgB,uEAAT,IAAS;AAAE;AACvCA,EAAAA,IAAI,GAAGA,IAAI,GAAGA,IAAH,GAAU,IAAIZ,IAAJ,GAAWC,OAAX,EAArB;AACA,MAAIY,IAAI,GAAG,IAAIb,IAAJ,CAASY,IAAT,CAAX;AACA,MAAIT,UAAU,GAAG,EAAjB;AACA,MAAIW,CAAC,GAAGD,IAAI,CAACE,QAAL,KAAkB,CAA1B;AACAD,EAAAA,CAAC,GAAGA,CAAC,CAACL,QAAF,GAAaO,MAAb,KAAwB,CAAxB,cAAgCF,CAAhC,cAAyCA,CAAzC,CAAJ;AACA,MAAIG,CAAC,GAAGJ,IAAI,CAACK,OAAL,GAAeT,QAAf,GAA0BO,MAA1B,KAAqC,CAArC,GAAyC,MAAMH,IAAI,CAACK,OAAL,GAAeT,QAAf,EAA/C,GAA2EI,IAAI,CAACK,OAAL,GAAeT,QAAf,EAAnF;AACA,MAAIU,CAAC,GAAGN,IAAI,CAACO,QAAL,GAAgBX,QAAhB,GAA2BO,MAA3B,KAAsC,CAAtC,GAA0C,MAAMH,IAAI,CAACO,QAAL,GAAgBX,QAAhB,EAAhD,GAA6EI,IAAI,CAACO,QAAL,GAAgBX,QAAhB,EAArF;AACA,MAAIY,CAAC,GAAGR,IAAI,CAACS,UAAL,GAAkBb,QAAlB,GAA6BO,MAA7B,KAAwC,CAAxC,GAA4C,MAAMH,IAAI,CAACS,UAAL,GAAkBb,QAAlB,EAAlD,GAAiFI,IAAI,CAACS,UAAL,GAAkBb,QAAlB,EAAzF;AACA,MAAIc,CAAC,GAAGV,IAAI,CAACW,UAAL,GAAkBf,QAAlB,GAA6BO,MAA7B,KAAwC,CAAxC,GAA4C,MAAMH,IAAI,CAACW,UAAL,GAAkBf,QAAlB,EAAlD,GAAiFI,IAAI,CAACW,UAAL,GAAkBf,QAAlB,EAAzF;AACAN,EAAAA,UAAU,cAAOU,IAAI,CAACY,WAAL,EAAP,SAA4BX,CAA5B,SAAgCG,CAAhC,cAAqCE,CAArC,SAAyCE,CAAzC,SAA6CE,CAA7C,MAAV;AACA,SAAOpB,UAAP;AACH,CAZD,C,CAcA;;;AACA7B,UAAU,CAACoD,MAAX,GAAoB,UAACC,MAAD,EAAsC;AAAA,MAA7BC,IAA6B,uEAAtB,IAAsB;AAAA,MAAhBC,IAAgB,uEAAT,IAAS;AACtD,MAAIC,SAAS,GAAGlD,IAAI,CAACmD,SAAL,CAAeH,IAAf,CAAhB;;AACAnD,EAAAA,MAAM,CAACuD,uCAAP,GAAiD,UAACrD,GAAD,EAAS;AACtD,QAAIF,MAAM,CAACwD,GAAX,EAAgB;AACZ,UAAI5B,IAAI,GAAG6B,WAAW,CAACvD,GAAD,CAAtB;;AACA,UAAI0B,IAAI,CAAC8B,OAAL,IAAgB,CAApB,EAAuB;AACnB,YAAIC,OAAO,GAAG;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAAd;;AACA,YAAIR,IAAJ,EAAU;AACNA,UAAAA,IAAI,CAACO,OAAD,CAAJ;AACH;AACJ;AACJ,KARD,MAQO;AACHzD,MAAAA,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAN;;AACA,UAAIkD,IAAJ,EAAU;AACNA,QAAAA,IAAI,CAAClD,GAAD,CAAJ;AACH;AACJ;AAEJ,GAhBD;;AAiBAF,EAAAA,MAAM,CAACO,MAAP,IAAiBP,MAAM,CAACO,MAAP,CAAcsD,+BAA/B,IAAkE7D,MAAM,CAACO,MAAP,CAAcsD,+BAAd,CAC9DX,MAD8D,EAE9DG,SAF8D,EAG9D,yCAH8D,CAAlE;AAKH,CAxBD;AA0BA;AACA;AACA;AACA;AACA;;;AACA,SAASI,WAAT,CAAqBvD,GAArB,EAA0B;AACtB,MAAI0B,IAAI,GAAGkC,SAAX;AACA,MAAIC,OAAO,GAAG7D,GAAd;AACA6D,EAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,CAAV;AACAD,EAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,CAAV;AACAD,EAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,oBAAhB,EAAsC,EAAtC,CAAV;AACApC,EAAAA,IAAI,GAAGzB,IAAI,CAACC,KAAL,CAAW2D,OAAX,CAAP;AACA,SAAOnC,IAAP;AACH,C,CAED;;;AACA/B,UAAU,CAACoE,aAAX,GAA2B,YAAiB;AAAA,MAAhBb,IAAgB,uEAAT,IAAS;AACxC;AACA,MAAIxB,IAAI,GAAG,IAAX;AACA,MAAIsC,OAAO,GAAG,IAAI3C,IAAJ,EAAd;AACA,MAAI4C,OAAO,GAAGtE,UAAU,CAAC6B,UAAX,EAAd;AACA,MAAI0C,SAAS,GAAGvE,UAAU,CAAC6B,UAAX,CAAsBwC,OAAO,CAACG,QAAR,CAAiBH,OAAO,CAAC5B,QAAR,KAAqB,CAAtC,CAAtB,CAAhB;;AACAtC,EAAAA,MAAM,CAACsE,qBAAP,GAA+B,UAACpE,GAAD,EAAS;AACpCA,IAAAA,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAN;AACA0B,IAAAA,IAAI,GAAG/B,UAAU,CAAC0E,UAAX,CAAsBrE,GAAG,CAACsE,IAA1B,CAAP;;AACA,QAAIpB,IAAJ,EAAU;AACNA,MAAAA,IAAI,CAACxB,IAAD,CAAJ;AACH;AACJ,GAND;;AAOA5B,EAAAA,MAAM,CAACO,MAAP,IAAiBP,MAAM,CAACO,MAAP,CAAckE,aAA/B,IAAgDzE,MAAM,CAACO,MAAP,CAAckE,aAAd,CAC5C5E,UAAU,CAACC,KADiC,EAC1B;AAClB,KAF4C,EAG5C,MAH4C,EAI5CsE,SAJ4C,EAK5CD,OAL4C,EAM5C,iBAN4C,EAO5C,SAP4C,EAQ5C,uBAR4C,CAAhD;AAUH,CAvBD,C,CAyBA;;;AACAtE,UAAU,CAAC0E,UAAX,GAAwB,UAAC3C,IAAD,EAAU;AAC9B;AACA,MAAI8C,UAAU,GAAG,EAAjB;;AACA,MAAI;AACA9C,IAAAA,IAAI,CAAC+C,OAAL,CAAa,UAACtD,IAAD,EAAOuD,KAAP,EAAiB;AAC1B,UAAIvD,IAAI,CAACO,IAAL,CAAUC,OAAV,KAAsB,UAA1B,EAAsC;AAClC,cAAM,IAAIgD,KAAJ,CAAU,MAAV,CAAN;AACH;;AACDH,MAAAA,UAAU,CAACzC,IAAX,CAAgBZ,IAAI,CAACO,IAAL,CAAUC,OAA1B;AACH,KALD;AAMH,GAPD,CAOE,OAAOiD,CAAP,EAAU;AACRzE,IAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACH;;AACD,SAAOoE,UAAP;AACH,CAdD,C,CAiBA;;;AACA7E,UAAU,CAACkF,MAAX,GAAoB,UAAC5C,IAAD,EAAU;AAC1B,MAAI6C,WAAW,GAAG;AACd9C,IAAAA,MAAM,EAAE,QADM;AAEdd,IAAAA,QAAQ,EAAE,CACN;AACIK,MAAAA,EAAE,EAAE5B,UAAU,CAAC6B,UAAX,CAAsBS,IAAtB,CADR;AAEIR,MAAAA,GAAG,EAAE,iBAFT;AAGIC,MAAAA,IAAI,EAAE;AACFC,QAAAA,OAAO,EAAE;AADP;AAHV,KADM;AAFI,GAAlB;AAYAhC,EAAAA,UAAU,CAACoD,MAAX,CAAkBpD,UAAU,CAACC,KAA7B,EAAoCkF,WAApC;AACH,CAdD;;AAiBAnF,UAAU,CAACE,QAAX;AACA,eAAeF,UAAf","sourcesContent":["/*\r\n * @Description: 上报数据\r\n * @version: \r\n * @Author: HeZhen\r\n * @Date: 2020-12-24 15:54:54\r\n * @LastEditors: HeZhen\r\n * @LastEditTime: 2021-03-02 10:56:05\r\n *          {\r\n                status: \"online\",\r\n                services: [\r\n                    {\r\n                        ts: \"20201222T112003Z\",\r\n                        sid: \"brushingHistory\",\r\n                        data: {\r\n                            binCode: \"00101101\",\r\n                        },\r\n                    },\r\n                    {\r\n                        ts: \"20201223T112003Z\",\r\n                        sid: \"brushingHistory\",\r\n                        data: {\r\n                            binCode: \"00101111\",\r\n                        },\r\n                    },\r\n                    {\r\n                        ts: \"20201223T112003Z\",\r\n                        sid: \"brushingHistory\",\r\n                        data: {\r\n                            binCode: \"SSSSSSSS\",\r\n                        },\r\n                    },\r\n                ],\r\n            };\r\n */\r\nimport { scale } from '../Util/tool'\r\n\r\n// 操作云端历史数据对象\r\nconst reportData = {};\r\n\r\n// 云端唯一 id\r\nreportData.devId = '';\r\n\r\n// 获取华为云端唯一id\r\nreportData.getDevId = () => {\r\n    // 获取设备信息\r\n    window.getDevInfoAllCallback = (res) => {\r\n        res = JSON.parse(res);\r\n        console.log('获取华为云端唯一id',res);\r\n        reportData.devId = res.devId;\r\n    }\r\n    window.hilink && window.hilink.getDevInfoAll && window.hilink.getDevInfoAll(\"0\", \"\", \"getDevInfoAllCallback\");\r\n}\r\n\r\n// 格式化数据\r\nreportData.formatDataFromMachine = (str) => {\r\n    let byteLen = parseInt(str.substr(2, 2), 16)\r\n    let ab = new ArrayBuffer(byteLen)\r\n    let dv = new DataView(ab)\r\n    for (let i = 0; i < byteLen; i++) {\r\n        i < 90 ? dv.setUint8(i, parseInt(str.substr(i * 2 + 4, 2), 16)) : dv.setUint8(i, parseInt(str.substr(i * 2 + 10, 2), 16));\r\n    }\r\n    let services = [], item = {}, reportTime = new Date().getTime() - (1000 * byteLen);\r\n    for (let i = 0; i < byteLen; i++) {\r\n        item.ts = reportData.formatTime(reportTime);\r\n        item.sid = 'brushingHistory';\r\n        item.data = {\r\n            binCode: scale.hextoBin(dv.getUint8(i).toString(16))\r\n        };\r\n        services.push(item);\r\n        item = {};\r\n        reportTime += (1000)\r\n    }\r\n    let res = {\r\n        status: \"online\",\r\n        services: [...services]\r\n    };\r\n    return res;\r\n}\r\n\r\n// 格式化上报时间\r\nreportData.formatTime = (time = null) => { // time 要求时间毫秒数\r\n    time = time ? time : new Date().getTime();\r\n    let date = new Date(time);\r\n    let formatTime = '';\r\n    let M = date.getMonth() + 1;\r\n    M = M.toString().length === 1 ? `0${M}` : `${M}`;\r\n    let D = date.getDate().toString().length === 1 ? '0' + date.getDate().toString() : date.getDate().toString();\r\n    let H = date.getHours().toString().length === 1 ? '0' + date.getHours().toString() : date.getHours().toString();\r\n    let m = date.getMinutes().toString().length === 1 ? '0' + date.getMinutes().toString() : date.getMinutes().toString();\r\n    let S = date.getSeconds().toString().length === 1 ? '0' + date.getSeconds().toString() : date.getSeconds().toString();\r\n    formatTime += `${date.getFullYear()}${M}${D}T${H}${m}${S}Z`;\r\n    return formatTime;\r\n}\r\n\r\n// 上报数据到华为云端\r\nreportData.report = (onlyId, Data = null, func = null) => {\r\n    let json_body = JSON.stringify(Data);\r\n    window.reportDeviceProfileImpermanencyCallback = (res) => {\r\n        if (window.ios) {\r\n            let data = getIOSDevid(res);\r\n            if (data.errCode == 0) {\r\n                let resData = { errcode: 200 };\r\n                if (func) {\r\n                    func(resData)\r\n                }\r\n            }\r\n        } else {\r\n            res = JSON.parse(res);\r\n            if (func) {\r\n                func(res)\r\n            }\r\n        }\r\n\r\n    }\r\n    window.hilink && window.hilink.reportDeviceProfileImpermanency && window.hilink.reportDeviceProfileImpermanency(\r\n        onlyId,\r\n        json_body,\r\n        \"reportDeviceProfileImpermanencyCallback\"\r\n    );\r\n}\r\n\r\n/**\r\n * @description: 解析ios devID\r\n * @param {*}\r\n * @return {*}\r\n */\r\nfunction getIOSDevid(res) {\r\n    let data = undefined;\r\n    let dataStr = res;\r\n    dataStr = dataStr.replace(/\"{/g, '{');\r\n    dataStr = dataStr.replace(/}\"/g, '}');\r\n    dataStr = dataStr.replace(/\\\\|\\n|\\r|\\t|\\f|\\t/g, '');\r\n    data = JSON.parse(dataStr);\r\n    return data;\r\n}\r\n\r\n// 获取历史记录\r\nreportData.getHistoryLog = (func = null) => {\r\n    //获取历史记录回调\r\n    let data = null;\r\n    let nowDate = new Date();\r\n    let endTime = reportData.formatTime();\r\n    let startTime = reportData.formatTime(nowDate.setMonth(nowDate.getMonth() - 7));\r\n    window.getDevHistoryCallBack = (res) => {\r\n        res = JSON.parse(res);\r\n        data = reportData.filterData(res.list);\r\n        if (func) {\r\n            func(data)\r\n        }\r\n    };\r\n    window.hilink && window.hilink.getDevHistory && window.hilink.getDevHistory(\r\n        reportData.devId, // 华为分配的id  \r\n        \"0\",\r\n        \"1000\",\r\n        startTime,\r\n        endTime,\r\n        \"brushingHistory\",\r\n        \"binCode\",\r\n        \"getDevHistoryCallBack\"\r\n    );\r\n}\r\n\r\n// 获取历史记录\r\nreportData.filterData = (data) => {\r\n    //获取历史记录回调\r\n    let formatData = [];\r\n    try {\r\n        data.forEach((item, index) => {\r\n            if (item.data.binCode === 'SSSSSSSS') {\r\n                throw new Error('stop')\r\n            }\r\n            formatData.push(item.data.binCode)\r\n        })\r\n    } catch (e) {\r\n        console.log('');\r\n    }\r\n    return formatData;\r\n}\r\n\r\n\r\n// 特殊数据 用于分割重置后的刷牙历史数据\r\nreportData.resize = (time) => {\r\n    let specialData = {\r\n        status: \"online\",\r\n        services: [\r\n            {\r\n                ts: reportData.formatTime(time),\r\n                sid: \"brushingHistory\",\r\n                data: {\r\n                    binCode: \"SSSSSSSS\",\r\n                },\r\n            },\r\n        ]\r\n    };\r\n    reportData.report(reportData.devId, specialData)\r\n}\r\n\r\n\r\nreportData.getDevId()\r\nexport default reportData"]}]}